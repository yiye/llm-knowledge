# Product Agent Workbench - å·¥ä½œå°æ¶æ„æŠ€æœ¯é€‰å‹

> **æ›´æ–°æ—¶é—´**: 2026-01-24  
> **åŸºäº**: é“å‹å¯¹å·¥ä½œå°å¸ƒå±€çš„æ˜ç¡®éœ€æ±‚  
> **æ ¸å¿ƒå˜åŒ–**: ä»"å•çº¯ç¼–è¾‘å™¨"å‡çº§ä¸º"å®Œæ•´å·¥ä½œå°åº”ç”¨"ï¼ˆç±»ä¼¼ VSCode/Cursor çš„å¤šé¢æ¿æ¶æ„ï¼‰

---

## ğŸ¯ æ¶æ„éœ€æ±‚é‡æ–°å®šä¹‰

### åŸå§‹ç†è§£ âŒ
- **è¯¯è§£**ï¼šä»¥ä¸ºåªéœ€è¦ä¸€ä¸ª"å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"
- **å¯¼è‡´**ï¼šæ¨è BlockNote ä½œä¸ºæ ¸å¿ƒ

### æ­£ç¡®ç†è§£ âœ…
- **å®é™…éœ€æ±‚**ï¼šå®Œæ•´çš„å·¥ä½œå°åº”ç”¨ï¼ˆWorkbench Applicationï¼‰
- **å¸ƒå±€è¦æ±‚**ï¼š
  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     Title Bar                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚      â”‚                                 â”‚                â”‚
  â”‚ å·¦ä¾§  â”‚           ä¸­é—´å±•ç¤ºåŒº              â”‚  å³ä¾§ Agent   â”‚
  â”‚ ç›®å½•  â”‚                                 â”‚   Chatbot     â”‚
  â”‚ æ ‘å½¢  â”‚  - æ–‡æ¡£ç¼–è¾‘å™¨                    â”‚                â”‚
  â”‚ ç»“æ„  â”‚  - æµè§ˆå™¨ (iframe/webview)       â”‚  å¯¹è¯ç•Œé¢     â”‚
  â”‚      â”‚  - Agent Skills ç®¡ç†             â”‚  + å·¥å…·è°ƒç”¨   â”‚
  â”‚      â”‚  - æ‰§è¡Œæ—¥å¿—                      â”‚  + å†å²è®°å½•   â”‚
  â”‚      â”‚  - é…ç½®é¢„è§ˆ (Diff View)           â”‚                â”‚
  â”‚      â”‚  - å…¶ä»–è‡ªå®šä¹‰ Panel               â”‚                â”‚
  â”‚      â”‚                                 â”‚                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                   Status Bar                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

### æ ¸å¿ƒç‰¹å¾
1. **å¤šé¢æ¿ç³»ç»Ÿ**ï¼šä¸æ˜¯å•ä¸€ç¼–è¾‘å™¨ï¼Œè€Œæ˜¯å¤šä¸ªå¯åˆ‡æ¢çš„é¢æ¿
2. **æµè§ˆå™¨åµŒå…¥**ï¼šéœ€è¦åœ¨ä¸­é—´åŒºåŸŸæ˜¾ç¤º Web å†…å®¹ï¼ˆæµ‹è¯• Agent ç”Ÿæˆçš„é¡µé¢ï¼‰
3. **Agent Skills**ï¼šåŸºäº Anthropic æ ‡å‡†çš„ SKILL.md æ–‡ä»¶ç³»ç»Ÿ
4. **å®æ—¶åä½œ**ï¼šå¤šä¸ªé¢æ¿éœ€è¦å…±äº«çŠ¶æ€ï¼ˆæ–‡æ¡£å˜æ›´ â†’ Agent å“åº” â†’ æ‰§è¡Œæ—¥å¿—æ›´æ–°ï¼‰
5. **æ‰©å±•æ€§**ï¼šæœªæ¥å¯èƒ½å¢åŠ æ›´å¤šç±»å‹çš„é¢æ¿ï¼ˆTerminalã€æ•°æ®åº“æŸ¥è¯¢ç»“æœç­‰ï¼‰

---

## ğŸ”¥ é‡æ–°è¯„ä¼°ï¼šä¸ºä»€ä¹ˆè¿™æ”¹å˜äº†ä¸€åˆ‡

### Monaco Editor çš„ä»·å€¼æš´å¢ â­

ä¹‹å‰å°å¥³å­è¯´ Monaco ä¸é€‚åˆæ–‡æ¡£ç¼–è¾‘ï¼Œ**ä½†åœ¨å·¥ä½œå°æ¶æ„ä¸‹ï¼Œè¿™ä¸ªç»“è®ºéœ€è¦ä¿®æ­£**ï¼

#### Monaco åœ¨å·¥ä½œå°åœºæ™¯çš„ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ | é‡è¦æ€§ |
|-----|------|-------|
| **åŸç”Ÿå¤šé¢æ¿æ”¯æŒ** | Monaco è®¾è®¡æ—¶å°±è€ƒè™‘äº†å¤šç¼–è¾‘å™¨å®ä¾‹å…±å­˜ | â­â­â­â­â­ |
| **Diff View å†…ç½®** | é…ç½®é¢„è§ˆé¢æ¿å¯ä»¥ç›´æ¥ç”¨ Monaco Diff Editor | â­â­â­â­â­ |
| **ä»£ç é«˜äº®** | JSON/YAML é…ç½®ã€SQL æŸ¥è¯¢ã€è„šæœ¬éƒ½éœ€è¦è¯­æ³•é«˜äº® | â­â­â­â­ |
| **VSCode ç”Ÿæ€å¤ç”¨** | å¯ä»¥å‚è€ƒ VSCode Workbench çš„æˆç†Ÿæ¶æ„ | â­â­â­â­â­ |
| **çŠ¶æ€ç®¡ç†æˆç†Ÿ** | Monaco çš„ Model ç³»ç»Ÿå¤©ç„¶æ”¯æŒå¤šæ–‡æ¡£ç®¡ç† | â­â­â­â­ |

#### ä¹‹å‰è¢«å¿½ç•¥çš„å…³é”®ç‚¹

é“å‹çš„éœ€æ±‚ä¸­æåˆ°ï¼š
- **"Agent Skills ç»†èŠ‚"**ï¼šåŸºäº Anthropic æ ‡å‡†çš„ SKILL.md æ–‡ä»¶ï¼ˆmarkdown + YAML frontmatterï¼‰
- **"æ‰§è¡Œæ—¥å¿—"**ï¼šå¸¦æœ‰è¯­æ³•é«˜äº®çš„æ—¥å¿—ï¼ˆç±»ä¼¼ VSCode çš„ Output Panelï¼‰
- **"é…ç½®é¢„è§ˆ"**ï¼šéœ€è¦ Diff View æ˜¾ç¤º Before/After

**è¿™äº›éƒ½æ˜¯ Monaco çš„å¼ºé¡¹ï¼** ğŸ”¥

---

## ğŸ—ï¸ æ¨èæ¶æ„æ–¹æ¡ˆï¼ˆé‡æ–°è®¾è®¡ï¼‰

### æ–¹æ¡ˆ Dï¼šTheia-inspired å·¥ä½œå°æ¶æ„ï¼ˆæ–°æ¨èï¼‰â­â­â­

åŸºäº Eclipse Theia çš„è®¾è®¡ç†å¿µï¼Œä½†ä¸ç›´æ¥ä½¿ç”¨ Theiaï¼ˆå¤ªé‡ï¼‰ã€‚

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| å±‚çº§ | ç»„ä»¶ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|-----|------|---------|------|
| **å·¥ä½œå°æ¡†æ¶** | å¸ƒå±€ç®¡ç† | React + [react-mosaic](https://github.com/nomcopter/react-mosaic) | âœ… 21.3k starsï¼Œç±» VSCode çš„å¯æ‹–æ‹½é¢æ¿<br>âœ… æ”¯æŒä»»æ„åµŒå¥—å’Œåˆ†å‰²<br>âœ… æŒä¹…åŒ–å¸ƒå±€çŠ¶æ€ |
| **å·¦ä¾§ç›®å½•æ ‘** | æ–‡ä»¶æµè§ˆå™¨ | [react-arborist](https://github.com/brimdata/react-arborist) | âœ… è™šæ‹Ÿæ»šåŠ¨ï¼Œæ”¯æŒç™¾ä¸‡èŠ‚ç‚¹<br>âœ… æ‹–æ‹½ã€æœç´¢ã€å¤šé€‰<br>âœ… ç±» VSCode äº¤äº’ |
| **ä¸­é—´å±•ç¤ºåŒº** | å¤šç¼–è¾‘å™¨ç³»ç»Ÿ | **Monaco Editor**ï¼ˆä»£ç /é…ç½®ï¼‰<br>+ **BlockNote**ï¼ˆå¯Œæ–‡æ¡£ï¼‰ | âœ… Monaco å¤„ç†ç»“æ„åŒ–å†…å®¹<br>âœ… BlockNote å¤„ç†è‡ªç”±æ–‡æ¡£<br>âœ… æŒ‰é¢æ¿ç±»å‹åŠ¨æ€åˆ‡æ¢ |
| **æµè§ˆå™¨åµŒå…¥** | Web é¢„è§ˆ | `<iframe>` (Web) / `BrowserView` (Electron) | âœ… ç®€å•å¯é <br>âœ… æµ‹è¯• Agent ç”Ÿæˆçš„é¡µé¢ |
| **å³ä¾§ Chatbot** | å¯¹è¯ç•Œé¢ | [react-chatbot-kit](https://fredrikoseberg.github.io/react-chatbot-kit/) + Vercel AI SDK | âœ… è½»é‡çº§å¯¹è¯ UI<br>âœ… Agent æµå¼è¾“å‡º |
| **çŠ¶æ€ç®¡ç†** | å…¨å±€çŠ¶æ€ | [Zustand](https://github.com/pmndrs/zustand) + [Immer](https://immerjs.github.io/immer/) | âœ… ç®€å•é«˜æ•ˆ<br>âœ… æ—¶é—´æ—…è¡Œè°ƒè¯•<br>âœ… å¤šé¢æ¿çŠ¶æ€åŒæ­¥ |
| **Agent æ¡†æ¶** | AI æ¨ç† | Vercel AI SDK | æµå¼è¾“å‡ºã€å·¥å…·è°ƒç”¨ |
| | MCP é›†æˆ | Model Context Protocol | è¿æ¥å¤–éƒ¨å·¥å…·å’Œæ•°æ®æº |
| | Agent Skills | SKILL.md æ ‡å‡†ï¼ˆAnthropicï¼‰ | æ•™ Agent å¤æ‚å·¥ä½œæµ ğŸ”¥ |
| **å‘é‡åº“** | è¯­ä¹‰æœç´¢ | Qdrant | Skills æ£€ç´¢ã€ä¸Šä¸‹æ–‡åŒ¹é… |

#### æ¶æ„ç¤ºæ„å›¾

```typescript
<WorkbenchApp>
  <TitleBar />
  
  <MosaicLayout>
    {/* å·¦ä¾§ï¼šç›®å½•æ ‘ */}
    <Sidebar position="left">
      <FileTree 
        files={documents}
        onSelect={openInEditor}
      />
    </Sidebar>
    
    {/* ä¸­é—´ï¼šå¯åˆ‡æ¢çš„é¢æ¿ç³»ç»Ÿ */}
    <MainArea>
      <TabBar>
        {openPanels.map(panel => (
          <Tab key={panel.id}>{panel.title}</Tab>
        ))}
      </TabBar>
      
      <PanelContainer>
        {currentPanel.type === 'document' && (
          <BlockNoteEditor content={panel.content} />
        )}
        
        {currentPanel.type === 'config' && (
          <MonacoEditor 
            language="json"
            diffMode={panel.showDiff}
          />
        )}
        
        {currentPanel.type === 'browser' && (
          <iframe src={panel.url} />
        )}
        
        {currentPanel.type === 'logs' && (
          <MonacoEditor 
            language="log"
            readOnly
          />
        )}
        
        {currentPanel.type === 'skill' && (
          <MonacoEditor 
            language="markdown"
            value={panel.skillContent}
            readOnly={panel.readOnly}
          />
        )}
        
        {currentPanel.type === 'skills-manager' && (
          <SkillsManagerPanel />
        )}
      </PanelContainer>
    </MainArea>
    
    {/* å³ä¾§ï¼šAgent Chatbot */}
    <Sidebar position="right">
      <ChatPanel 
        agent={agentInstance}
        onToolCall={handleToolExecution}
      />
    </Sidebar>
  </MosaicLayout>
  
  <StatusBar />
</WorkbenchApp>
```

---

### æ–¹æ¡ˆ Eï¼šç›´æ¥åŸºäº Eclipse Theiaï¼ˆå¦‚æœèµ„æºå……è¶³ï¼‰âš ï¸

#### æ ¸å¿ƒæ–¹æ¡ˆ

| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|-----|------|------|
| **åŸºç¡€æ¡†æ¶** | [Eclipse Theia](https://theia-ide.org/) | âœ… 21.3k starsï¼ŒTypeScript ç¼–å†™<br>âœ… å®Œæ•´çš„å·¥ä½œå°æ¶æ„<br>âœ… æ”¯æŒ VSCode æ‰©å±•ï¼ˆ3000+ å¯ç”¨ï¼‰<br>âœ… å¯ White-label å®šåˆ¶ |
| **ç¼–è¾‘å™¨** | Monacoï¼ˆå†…ç½®ï¼‰ | Theia é»˜è®¤ä½¿ç”¨ Monaco |
| **æ‰©å±•ç³»ç»Ÿ** | Theia Extensions | å¼€å‘ Agent Chatbot ä½œä¸ºæ‰©å±• |

#### ä¼˜åŠ¿ âœ…

1. **å¼€ç®±å³ç”¨çš„å·¥ä½œå°**ï¼š
   - æ–‡ä»¶æ ‘ã€ç¼–è¾‘å™¨ã€é¢æ¿ç³»ç»Ÿå…¨éƒ¨å†…ç½®
   - æ‹–æ‹½ã€åˆ†å‰²ã€æŒä¹…åŒ–å¸ƒå±€è‡ªåŠ¨å¤„ç†
   - é”®ç›˜å¿«æ·é”®ã€å‘½ä»¤é¢æ¿ç­‰ IDE åŠŸèƒ½

2. **VSCode æ‰©å±•å…¼å®¹**ï¼š
   - å¯ä»¥ç›´æ¥ä½¿ç”¨ open-vsx.org çš„ 3000+ æ‰©å±•
   - Markdown é¢„è§ˆã€Git é›†æˆç­‰åŠŸèƒ½å…è´¹è·å¾—

3. **ä¼ä¸šçº§æˆç†Ÿåº¦**ï¼š
   - Armã€Red Hatã€Google Cloud Shell éƒ½åœ¨ç”¨
   - ç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒéªŒè¯

#### åŠ£åŠ¿ âŒ

1. **å­¦ä¹ æ›²çº¿é™¡å³­**ï¼š
   - Theia çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿï¼ˆInversifyï¼‰å¤æ‚
   - æ‰©å±•å¼€å‘éœ€è¦å­¦ä¹  Theia APIï¼ˆä¸ VSCode API ä¸å®Œå…¨ä¸€è‡´ï¼‰

2. **åŒ…ä½“ç§¯å¤§**ï¼š
   - å®Œæ•´æ¡†æ¶å¸¦æ¥çš„ä»£ä»·
   - ä¸é€‚åˆéœ€è¦è½»é‡çº§çš„åœºæ™¯

3. **å®šåˆ¶éš¾åº¦**ï¼š
   - è¦ç§»é™¤ä¸éœ€è¦çš„åŠŸèƒ½ï¼ˆå¦‚ Gitã€Debugï¼‰æ¯”è¾ƒéº»çƒ¦
   - UI å®šåˆ¶éœ€è¦æ·±å…¥ç†è§£ Theia çš„ä¸»é¢˜ç³»ç»Ÿ

#### é€‚ç”¨åœºæ™¯

- âœ… å›¢é˜Ÿæœ‰ 3+ ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆ
- âœ… éœ€è¦å¿«é€Ÿä¸Šçº¿ï¼ˆ2-3 ä¸ªæœˆï¼‰
- âœ… æœªæ¥è®¡åˆ’æ”¯æŒæ‰©å±•ç”Ÿæ€ï¼ˆè®©ç¬¬ä¸‰æ–¹å¼€å‘ Skillsï¼‰
- âŒ ä¸é€‚åˆ MVP å¿«é€ŸéªŒè¯ï¼ˆå¤ªé‡ï¼‰

---

### æ–¹æ¡ˆ Fï¼šElectron + VSCode Workbenchï¼ˆå¦‚æœè¦åšæ¡Œé¢åº”ç”¨ï¼‰

#### æ ¸å¿ƒæ–¹æ¡ˆ

| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|-----|------|------|
| **æ¡Œé¢æ¡†æ¶** | Electron | è·¨å¹³å°æ¡Œé¢åº”ç”¨ |
| **å¸ƒå±€** | æ‰‹åŠ¨å®ç° VSCode Workbench é£æ ¼ | å‚è€ƒ VSCode çš„å¸ƒå±€ä»£ç  |
| **ç¼–è¾‘å™¨** | Monaco Editor | åŒæ–¹æ¡ˆ D |
| **æµè§ˆå™¨** | Electron BrowserView | æ€§èƒ½ä¼˜äº iframe |

#### ä¼˜åŠ¿ âœ…

1. **æ¡Œé¢åº”ç”¨ä½“éªŒ**ï¼š
   - æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè®¿é—®
   - ç³»ç»Ÿæ‰˜ç›˜ã€é€šçŸ¥ç­‰åŸç”Ÿèƒ½åŠ›
   - ç¦»çº¿å¯ç”¨

2. **æ›´å¥½çš„æµè§ˆå™¨åµŒå…¥**ï¼š
   - Electron çš„ BrowserView æ€§èƒ½ä¼˜äº Web çš„ iframe
   - å¯ä»¥ä¸åµŒå…¥çš„æµè§ˆå™¨æ·±åº¦äº¤äº’ï¼ˆæ³¨å…¥è„šæœ¬ã€ç›‘å¬äº‹ä»¶ï¼‰

3. **ä¸ Cursor ä½“éªŒä¸€è‡´**ï¼š
   - Cursor æœ¬èº«å°±æ˜¯ Electron åº”ç”¨
   - ç”¨æˆ·ç†Ÿæ‚‰åº¦é«˜

#### åŠ£åŠ¿ âŒ

1. **éƒ¨ç½²å¤æ‚**ï¼š
   - éœ€è¦ä¸º Windows/macOS/Linux åˆ†åˆ«æ‰“åŒ…
   - è‡ªåŠ¨æ›´æ–°æœºåˆ¶éœ€è¦é¢å¤–å¼€å‘

2. **Web ç‰ˆåŠŸèƒ½å—é™**ï¼š
   - å¦‚æœæœªæ¥è¦å‡º Web ç‰ˆï¼Œå¾ˆå¤šä»£ç æ— æ³•å¤ç”¨
   - Electron ç‰¹æœ‰ API éœ€è¦é‡å†™

3. **åŒ…ä½“ç§¯**ï¼š
   - Electron åº”ç”¨è‡³å°‘ 100MB+
   - ä¸é€‚åˆå¿«é€Ÿåˆ†å‘

---

## ğŸ†š ä¸‰å¤§æ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | æ–¹æ¡ˆ D<br>ï¼ˆæ‰‹åŠ¨å·¥ä½œå°ï¼‰â­ | æ–¹æ¡ˆ E<br>ï¼ˆTheiaï¼‰ | æ–¹æ¡ˆ F<br>ï¼ˆElectronï¼‰ |
|-----|----------------------|-------------------|-------------------|
| **å¼€å‘å‘¨æœŸ** | 6-8 å‘¨ | 4-6 å‘¨ | 8-12 å‘¨ |
| **å­¦ä¹ æ›²çº¿** | ä¸­ç­‰ | é™¡å³­ | ä¸­ç­‰ |
| **çµæ´»æ€§** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
| **åŒ…ä½“ç§¯** | è½»é‡ï¼ˆWebï¼‰ | é‡ï¼ˆ15MB+ï¼‰ | æœ€é‡ï¼ˆ100MB+ï¼‰ |
| **æ‰©å±•æ€§** | è‡ªå·±è®¾è®¡ | å†…ç½®æ‰©å±•ç³»ç»Ÿ | è‡ªå·±è®¾è®¡ |
| **éƒ¨ç½²** | Web å³å¯ | Web/Desktop | ä»… Desktop |
| **é€‚åˆ MVP** | âœ… æ¨è | âš ï¸ è¿‡é‡ | âŒ å¤ªå¤æ‚ |
| **é€‚åˆç”Ÿäº§** | âœ… å¯æ‰©å±• | âœ… ä¼ä¸šçº§ | âœ… æ¡Œé¢ä¼˜å…ˆ |

---

## ğŸ” å…³é”®æŠ€æœ¯æ·±åº¦è§£æ

### 1ï¸âƒ£ react-mosaicï¼šä¸ºä»€ä¹ˆæ˜¯å·¥ä½œå°å¸ƒå±€çš„æœ€ä½³é€‰æ‹©ï¼Ÿ

**å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆ**ï¼š

| æ–¹æ¡ˆ | Stars | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|-----|-------|------|---------|
| **react-mosaic** | 4.2k | âœ… ç±» VSCode çš„ç“¦ç‰‡å¸ƒå±€<br>âœ… æ‹–æ‹½åˆ†å‰²ã€åˆå¹¶<br>âœ… åµŒå¥—æ— é™å±‚çº§ | **å·¥ä½œå°åº”ç”¨** â­ |
| react-grid-layout | 20k | âœ… ä»ªè¡¨æ¿å¸ƒå±€<br>âŒ ä¸æ”¯æŒåŠ¨æ€åˆ†å‰² | æ•°æ®å¤§å± |
| react-split-pane | 3.3k | âœ… ç®€å•çš„å·¦å³/ä¸Šä¸‹åˆ†å‰²<br>âŒ ä¸æ”¯æŒå¤æ‚åµŒå¥— | ç®€å•åŒæ å¸ƒå±€ |
| golden-layout | 6.2k | âœ… åŠŸèƒ½å¼ºå¤§<br>âŒ åŸºäº jQueryï¼Œä¸é€‚åˆ React | ä¼ ç»Ÿåº”ç”¨ |

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š

```typescript
// react-mosaic çš„å¸ƒå±€å®šä¹‰ï¼ˆå£°æ˜å¼ï¼‰
const layout = {
  direction: 'row',
  first: 'file-tree',  // å·¦ä¾§ç›®å½•æ ‘
  second: {
    direction: 'row',
    first: {
      direction: 'column',
      first: 'editor',   // ä¸­é—´ä¸Šéƒ¨ï¼šç¼–è¾‘å™¨
      second: 'logs'     // ä¸­é—´ä¸‹éƒ¨ï¼šæ—¥å¿—
    },
    second: 'chatbot'    // å³ä¾§ï¼šChatbot
  }
};

// æ¸²æŸ“
<Mosaic
  renderTile={(id) => <Panel id={id} />}
  value={layout}
  onChange={saveLayout}
/>
```

**ä¾æ®æ¥æº**ï¼š
- [react-mosaic GitHub](https://github.com/nomcopter/react-mosaic)ï¼ˆ4.2k starsï¼Œ2016-2025 æŒç»­ç»´æŠ¤ï¼‰
- Bloomberg å†…éƒ¨å·¥å…·ä½¿ç”¨ï¼Œç”Ÿäº§çº§éªŒè¯

---

### 2ï¸âƒ£ ä¸ºä»€ä¹ˆéœ€è¦ Monaco + BlockNote çš„åŒç¼–è¾‘å™¨æ¶æ„ï¼Ÿ

**å…³é”®è®¤çŸ¥**ï¼šå·¥ä½œå°ä¸­çš„"ä¸­é—´å±•ç¤ºåŒº"ä¸æ˜¯å•ä¸€ç¼–è¾‘å™¨ï¼Œè€Œæ˜¯**å¤šç§ç±»å‹çš„é¢æ¿**ã€‚

#### é¢æ¿ç±»å‹ä¸ç¼–è¾‘å™¨æ˜ å°„

| é¢æ¿ç±»å‹ | å†…å®¹æ ¼å¼ | æ¨èç¼–è¾‘å™¨ | ç†ç”± |
|---------|---------|-----------|------|
| **PRD æ–‡æ¡£** | å¯Œæ–‡æœ¬ | BlockNote | éœ€è¦å—ç¼–è¾‘ã€è‡ªç”±æ’ç‰ˆ |
| **ä¼šè®®çºªè¦** | å¯Œæ–‡æœ¬ | BlockNote | åŒä¸Š |
| **Skill å®šä¹‰** | JSON/YAML | Monaco | è¯­æ³•é«˜äº®ã€æ ¡éªŒ |
| **é…ç½®é¢„è§ˆ** | JSON Diff | Monaco Diff Editor | å†…ç½® Diff View â­ |
| **æ‰§è¡Œæ—¥å¿—** | çº¯æ–‡æœ¬/æ—¥å¿—æ ¼å¼ | Monaco (readOnly) | è¯­æ³•é«˜äº®ã€æœç´¢ |
| **SQL æŸ¥è¯¢** | SQL | Monaco | è¯­æ³•é«˜äº®ã€è‡ªåŠ¨è¡¥å…¨ |
| **æµè§ˆå™¨é¢„è§ˆ** | Web é¡µé¢ | `<iframe>` | ä¸éœ€è¦ç¼–è¾‘å™¨ |

#### å®ç°ç­–ç•¥

```typescript
// é¢æ¿ç»„ä»¶ï¼šæ ¹æ®ç±»å‹åŠ¨æ€æ¸²æŸ“ç¼–è¾‘å™¨
function PanelRenderer({ panel }) {
  switch (panel.type) {
    case 'document':
      return <BlockNoteEditor content={panel.content} />;
    
    case 'config':
      return (
        <MonacoEditor
          language="json"
          value={panel.content}
          options={{ minimap: { enabled: false } }}
        />
      );
    
    case 'diff':
      return (
        <MonacoDiffEditor
          original={panel.original}
          modified={panel.modified}
          language="json"
        />
      );
    
    case 'browser':
      return <iframe src={panel.url} />;
    
    default:
      return <EmptyPanel />;
  }
}
```

**æ ¸å¿ƒä»·å€¼**ï¼š
- **ä¸å†æ˜¯"ç¼–è¾‘å™¨é€‰ Monaco è¿˜æ˜¯ BlockNote"çš„äºŒé€‰ä¸€**
- **è€Œæ˜¯"å·¥ä½œå°ä¸­ä¸åŒé¢æ¿ç”¨ä¸åŒçš„ç¼–è¾‘å™¨"**

---

### 3ï¸âƒ£ æµè§ˆå™¨åµŒå…¥ï¼šWeb å’Œ Electron çš„æ–¹æ¡ˆå·®å¼‚

#### Web ç¯å¢ƒï¼ˆæ¨è MVPï¼‰

```typescript
// ä½¿ç”¨ iframeï¼ˆç®€å•å¯é ï¼‰
<iframe
  src={previewUrl}
  sandbox="allow-scripts allow-same-origin"
  style={{ width: '100%', height: '100%', border: 'none' }}
/>
```

**ä¼˜åŠ¿**ï¼š
- âœ… å…¼å®¹æ‰€æœ‰æµè§ˆå™¨
- âœ… å®‰å…¨éš”ç¦»ï¼ˆsandbox å±æ€§ï¼‰
- âœ… æ— éœ€é¢å¤–ä¾èµ–

**åŠ£åŠ¿**ï¼š
- âŒ è·¨åŸŸé™åˆ¶ï¼ˆCORSï¼‰
- âŒ æ€§èƒ½ç•¥å·®äºåŸç”Ÿ

#### Electron ç¯å¢ƒï¼ˆå¦‚æœåšæ¡Œé¢åº”ç”¨ï¼‰

```typescript
// ä½¿ç”¨ BrowserViewï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
const { BrowserView } = require('electron');

const view = new BrowserView();
mainWindow.setBrowserView(view);
view.setBounds({ x: 200, y: 0, width: 800, height: 600 });
view.webContents.loadURL(previewUrl);
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ€§èƒ½ä¼˜äº iframe
- âœ… å¯ä»¥æ³¨å…¥è„šæœ¬ã€ç›‘å¬äº‹ä»¶
- âœ… æ— è·¨åŸŸé™åˆ¶

**åŠ£åŠ¿**ï¼š
- âŒ ä»…é™ Electron
- âŒ API å¤æ‚åº¦é«˜

**ä¾æ®æ¥æº**ï¼š
- [Electron Web Embeds æ–‡æ¡£](https://electronjs.org/docs/latest/tutorial/web-embeds)ï¼ˆ2026 å¹´å®˜æ–¹æ¨èï¼‰
- Electron å®˜æ–¹æ˜ç¡®è¡¨ç¤ºï¼šWebView Tag å·²å¼ƒç”¨ï¼Œæ¨è BrowserView æˆ– iframe

---

### 4ï¸âƒ£ å³ä¾§ Chatbotï¼šAgent å¯¹è¯çš„æœ€ä½³å®è·µ

#### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æ–¹æ¡ˆ | ç†ç”± |
|-----|------|------|
| **UI ç»„ä»¶** | [react-chatbot-kit](https://fredrikoseberg.github.io/react-chatbot-kit/) | âœ… è½»é‡çº§ï¼ˆ20KBï¼‰<br>âœ… è‡ªå®šä¹‰æ¶ˆæ¯ç»„ä»¶<br>âœ… æ”¯æŒæµå¼è¾“å‡º |
| **æµå¼è¾“å‡º** | Vercel AI SDK `useChat` | âœ… React Hooks<br>âœ… è‡ªåŠ¨å¤„ç†æµå¼å“åº”<br>âœ… é‡è¯•ã€é”™è¯¯å¤„ç† |
| **å·¥å…·è°ƒç”¨å±•ç¤º** | è‡ªå®šä¹‰æ¶ˆæ¯ç»„ä»¶ | æ˜¾ç¤º Agent è°ƒç”¨çš„ Skill |

#### ç¤ºä¾‹ä»£ç 

```typescript
import { useChat } from 'ai/react';
import Chatbot from 'react-chatbot-kit';

function AgentChatPanel() {
  const { messages, input, handleInputChange, handleSubmit } = useChat({
    api: '/api/agent',
    onToolCall: ({ toolCall }) => {
      // åœ¨å·¥ä½œå°ä¸­æ‰“å¼€å¯¹åº”é¢æ¿
      openPanel({
        type: 'skill-execution',
        data: toolCall
      });
    }
  });

  return (
    <Chatbot
      messages={messages}
      input={input}
      onSubmit={handleSubmit}
      customComponents={{
        // è‡ªå®šä¹‰å·¥å…·è°ƒç”¨æ¶ˆæ¯
        toolCallMessage: ToolCallMessage,
        // è‡ªå®šä¹‰æ‰§è¡Œç»“æœæ¶ˆæ¯
        executionResult: ExecutionResultMessage
      }}
    />
  );
}
```

**å…³é”®ç‰¹æ€§**ï¼š
- **å·¥å…·è°ƒç”¨å¯è§†åŒ–**ï¼šå½“ Agent è°ƒç”¨ Skill æ—¶ï¼Œåœ¨ Chatbot ä¸­æ˜¾ç¤ºï¼ŒåŒæ—¶åœ¨ä¸­é—´åŒºåŸŸæ‰“å¼€æ‰§è¡Œè¯¦æƒ…é¢æ¿
- **è·¨é¢æ¿è”åŠ¨**ï¼šChatbot ä¸­çš„æ“ä½œå¯ä»¥è§¦å‘å·¥ä½œå°å…¶ä»–é¢æ¿çš„å˜åŒ–

---

### 5ï¸âƒ£ çŠ¶æ€ç®¡ç†ï¼šå¤šé¢æ¿å¦‚ä½•åŒæ­¥ï¼Ÿ

#### æ ¸å¿ƒæŒ‘æˆ˜

```
ç”¨æˆ·åœ¨æ–‡æ¡£ä¸­ä¿®æ”¹å†…å®¹
  â†“
Agent æ£€æµ‹åˆ°å˜æ›´ï¼ˆå³ä¾§ Chatbot æç¤ºï¼‰
  â†“
ç”¨æˆ·ç¡®è®¤æ‰§è¡Œ
  â†“
æ‰“å¼€æ–°é¢æ¿æ˜¾ç¤ºæ‰§è¡Œæ—¥å¿—
  â†“
é…ç½®é¢„è§ˆé¢æ¿æ›´æ–° Diff
  â†“
æ–‡æ¡£é¢æ¿æ ‡è®°ä¸º"å·²åŒæ­¥"
```

**é—®é¢˜**ï¼š5 ä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€ï¼Œå¦‚ä½•é¿å… Props Drillingï¼Ÿ

#### æ¨èæ–¹æ¡ˆï¼šZustand + Immer

```typescript
// store.ts
import create from 'zustand';
import { immer } from 'zustand/middleware/immer';

interface WorkbenchStore {
  panels: Panel[];
  openPanel: (panel: Panel) => void;
  closePanel: (id: string) => void;
  updatePanelContent: (id: string, content: any) => void;
  
  // Agent çŠ¶æ€
  agentMessages: Message[];
  addAgentMessage: (msg: Message) => void;
  
  // æ–‡æ¡£çŠ¶æ€
  documents: Document[];
  updateDocument: (id: string, content: any) => void;
}

const useWorkbenchStore = create<WorkbenchStore>()(
  immer((set) => ({
    panels: [],
    openPanel: (panel) => set((state) => {
      state.panels.push(panel);
    }),
    // ... å…¶ä»–æ–¹æ³•
  }))
);
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ¯” Redux ç®€å• 10 å€
- âœ… TypeScript ç±»å‹å®‰å…¨
- âœ… Immer è®©ä¸å¯å˜æ›´æ–°å˜å¾—ç®€å•
- âœ… æ”¯æŒ DevToolsï¼ˆæ—¶é—´æ—…è¡Œè°ƒè¯•ï¼‰

**ä¾æ®æ¥æº**ï¼š
- [Zustand GitHub](https://github.com/pmndrs/zustand)ï¼ˆ47.5k starsï¼ŒReact ç¤¾åŒºæ¨èï¼‰
- æ¯” Redux è½»é‡ï¼Œæ¯” Context API æ€§èƒ½å¥½

---

### 6ï¸âƒ£ ç„¦ç‚¹ç®¡ç†ç³»ç»Ÿï¼šAgent å¦‚ä½•çŸ¥é“ç”¨æˆ·åœ¨å“ªä¸ªé¢æ¿ï¼ŸğŸ”¥

#### ä¸ºä»€ä¹ˆè¿™æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ

**å…³é”®é—®é¢˜**ï¼š
- ç”¨æˆ·æŒ‰ Cmd+Aï¼šåº”è¯¥å…¨é€‰ç¼–è¾‘å™¨å†…å®¹ï¼Œè¿˜æ˜¯æ–‡ä»¶æ ‘ï¼Œè¿˜æ˜¯æ•´ä¸ªé¡µé¢ï¼Ÿ
- Agent éœ€è¦çŸ¥é“ï¼šç”¨æˆ·å½“å‰åœ¨å“ªä¸ªé¢æ¿ï¼Ÿæ­£åœ¨ç¼–è¾‘ä»€ä¹ˆï¼Ÿå…‰æ ‡åœ¨å“ªä¸€è¡Œï¼Ÿ

**VSCode çš„è§£å†³æ–¹æ¡ˆ**ï¼šFocus Tracker + Context Keys

```
ç”¨æˆ·ç‚¹å‡»ç¼–è¾‘å™¨
    â†“
1. DOM focus äº‹ä»¶è§¦å‘
    â†“
2. Focus Tracker æ£€æµ‹åˆ°ç„¦ç‚¹å˜åŒ–
    â†“
3. æ›´æ–° Context Keysï¼ˆeditorFocus = trueï¼‰
    â†“
4. Agent è¯»å– Context Keysï¼ŒçŸ¥é“ç”¨æˆ·åœ¨ç¼–è¾‘å™¨
    â†“
5. å¿«æ·é”®ç³»ç»Ÿæ ¹æ® Context Keys å†³å®š Cmd+A çš„è¡Œä¸º
```

#### æ ¸å¿ƒæ¶æ„

```typescript
// ğŸ“ focus-manager.ts

export class FocusManager {
  private contexts = new Map<string, any>();
  private _onDidChangeContext = new EventEmitter<ContextChange>();
  
  // ğŸ”¥ æ ¸å¿ƒä¸Šä¸‹æ–‡é”®
  readonly contextKeys = {
    editorFocus: false,          // ç¼–è¾‘å™¨æ˜¯å¦æœ‰ç„¦ç‚¹
    editorHasSelection: false,   // æ˜¯å¦æœ‰é€‰ä¸­å†…å®¹
    fileTreeFocus: false,        // æ–‡ä»¶æ ‘æ˜¯å¦æœ‰ç„¦ç‚¹
    chatbotFocus: false,         // Chatbot æ˜¯å¦æœ‰ç„¦ç‚¹
    browserFocus: false,         // æµè§ˆå™¨é¢„è§ˆæ˜¯å¦æœ‰ç„¦ç‚¹
    agentIsThinking: false,      // Agent æ˜¯å¦æ­£åœ¨æ€è€ƒ
  };
  
  // ğŸ”¥ åˆ›å»ºä¸Šä¸‹æ–‡é”®
  createKey<T>(key: string, defaultValue: T): ContextKey<T> {
    this.contexts.set(key, defaultValue);
    
    return {
      set: (value: T) => {
        const oldValue = this.contexts.get(key);
        if (oldValue !== value) {
          this.contexts.set(key, value);
          this._onDidChangeContext.fire({ key, value });
          
          console.log(`[Context] ${key} = ${value}`);
          
          // ğŸ”¥ é€šçŸ¥ Agent ç„¦ç‚¹å˜åŒ–
          if (key.includes('Focus')) {
            this.notifyAgentFocusChange(key, value);
          }
        }
      },
      get: () => this.contexts.get(key)
    };
  }
  
  // ğŸ”¥ é€šçŸ¥ Agent ç„¦ç‚¹å˜åŒ–
  private notifyAgentFocusChange(key: string, value: boolean) {
    if (value) {
      // æŸä¸ªé¢æ¿è·å¾—ç„¦ç‚¹
      const panelType = key.replace('Focus', '');
      agentService.onUserFocusChanged(panelType);
    }
  }
  
  // ğŸ”¥ è¯„ä¼° when æ¡ä»¶ï¼ˆç”¨äºå¿«æ·é”®ï¼‰
  evaluate(whenClause: string): boolean {
    // æ”¯æŒï¼šeditorFocus && !readOnly
    if (whenClause.includes('&&')) {
      return whenClause.split('&&')
        .map(s => s.trim())
        .every(condition => this.evaluateSingle(condition));
    }
    
    return this.evaluateSingle(whenClause);
  }
  
  private evaluateSingle(condition: string): boolean {
    if (condition.startsWith('!')) {
      return !this.contexts.get(condition.substring(1));
    }
    return this.contexts.get(condition) === true;
  }
}
```

#### åœ¨å„ä¸ªé¢æ¿ä¸­ä½¿ç”¨

```typescript
// ğŸ“ editor-panel.tsx

export function EditorPanel() {
  const focusManager = useFocusManager();
  const editorFocusKey = useContextKey('editorFocus');
  const hasSelectionKey = useContextKey('editorHasSelection');
  
  const handleFocus = useCallback(() => {
    // ğŸ”¥ ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹
    editorFocusKey.set(true);
    
    // ğŸ”¥ Agent ç°åœ¨çŸ¥é“ç”¨æˆ·åœ¨ç¼–è¾‘å™¨
    console.log('Agent: ç”¨æˆ·æ­£åœ¨ç¼–è¾‘å™¨ä¸­');
  }, []);
  
  const handleBlur = useCallback(() => {
    editorFocusKey.set(false);
    hasSelectionKey.set(false);
  }, []);
  
  const handleSelectionChange = useCallback((selection) => {
    // ğŸ”¥ æ›´æ–°é€‰æ‹©çŠ¶æ€
    hasSelectionKey.set(!selection.isEmpty);
    
    if (!selection.isEmpty) {
      // ğŸ”¥ Agent çŸ¥é“ç”¨æˆ·é€‰ä¸­äº†å†…å®¹
      const selectedText = editor.getModel()?.getValueInRange(selection);
      agentService.onUserSelectedText(selectedText, selection);
    }
  }, []);
  
  return (
    <div 
      className="editor-panel"
      onFocus={handleFocus}
      onBlur={handleBlur}
      tabIndex={0}
    >
      <MonacoEditor
        onDidChangeCursorSelection={handleSelectionChange}
        onDidChangeCursorPosition={(e) => {
          // ğŸ”¥ Agent çŸ¥é“å…‰æ ‡ä½ç½®
          agentService.onCursorPositionChanged(e.position);
        }}
      />
    </div>
  );
}

// ğŸ“ file-tree-panel.tsx

export function FileTreePanel() {
  const fileTreeFocusKey = useContextKey('fileTreeFocus');
  
  return (
    <div 
      className="file-tree-panel"
      onFocus={() => fileTreeFocusKey.set(true)}
      onBlur={() => fileTreeFocusKey.set(false)}
      tabIndex={0}
    >
      <FileTree />
    </div>
  );
}

// ğŸ“ chatbot-panel.tsx

export function ChatbotPanel() {
  const chatbotFocusKey = useContextKey('chatbotFocus');
  
  return (
    <div 
      className="chatbot-panel"
      onFocus={() => chatbotFocusKey.set(true)}
      onBlur={() => chatbotFocusKey.set(false)}
      tabIndex={0}
    >
      <Chatbot />
    </div>
  );
}
```

#### Agent å¦‚ä½•åˆ©ç”¨ç„¦ç‚¹ä¿¡æ¯

```typescript
// ğŸ“ agent-service.ts

export class AgentService {
  private currentContext: {
    focusedPanel: string | null;
    cursorPosition: Position | null;
    selectedText: string | null;
  } = {
    focusedPanel: null,
    cursorPosition: null,
    selectedText: null
  };
  
  // ğŸ”¥ ç›‘å¬ç„¦ç‚¹å˜åŒ–
  onUserFocusChanged(panelType: string) {
    this.currentContext.focusedPanel = panelType;
    
    console.log(`[Agent] ç”¨æˆ·åˆ‡æ¢åˆ°: ${panelType}`);
    
    // æ ¹æ®ç„¦ç‚¹æä¾›ä¸åŒå»ºè®®
    if (panelType === 'editor') {
      this.suggestEditorActions();
    } else if (panelType === 'fileTree') {
      this.suggestFileActions();
    }
  }
  
  // ğŸ”¥ ç›‘å¬é€‰ä¸­å†…å®¹
  onUserSelectedText(text: string, range: Range) {
    this.currentContext.selectedText = text;
    
    console.log(`[Agent] ç”¨æˆ·é€‰ä¸­äº† ${text.length} ä¸ªå­—ç¬¦`);
    
    // è‡ªåŠ¨æä¾›å¿«é€Ÿæ“ä½œ
    if (text.length > 0) {
      this.showQuickActions([
        { title: 'ğŸ¤– è§£é‡Šè¿™æ®µä»£ç ', action: 'explain' },
        { title: 'ğŸ¤– ä¼˜åŒ–è¿™æ®µä»£ç ', action: 'optimize' },
        { title: 'ğŸ¤– ç”Ÿæˆæµ‹è¯•', action: 'test' },
      ]);
    }
  }
  
  // ğŸ”¥ ç›‘å¬å…‰æ ‡ä½ç½®
  onCursorPositionChanged(position: Position) {
    this.currentContext.cursorPosition = position;
    
    // è·å–å…‰æ ‡æ‰€åœ¨è¡Œçš„ä»£ç 
    const currentLine = editor.getModel()?.getLineContent(position.lineNumber);
    
    // æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
    const diagnostics = getDiagnosticsAtPosition(position);
    if (diagnostics.length > 0) {
      // ğŸ”¥ ä¸»åŠ¨æç¤ºä¿®å¤å»ºè®®
      this.suggestFix(diagnostics[0]);
    }
  }
  
  // ğŸ”¥ è·å–å½“å‰ä¸Šä¸‹æ–‡ï¼ˆç”¨äº AI æ¨ç†ï¼‰
  getCurrentContext(): AgentContext {
    return {
      focusedPanel: this.currentContext.focusedPanel,
      cursorPosition: this.currentContext.cursorPosition,
      selectedText: this.currentContext.selectedText,
      openFiles: editorService.getOpenFiles(),
      currentFile: editorService.getActiveFile(),
      // ğŸ”¥ è¿™äº›ä¿¡æ¯è®© Agent èƒ½å¤Ÿç²¾å‡†ç†è§£ç”¨æˆ·æ„å›¾
    };
  }
}
```

#### å¿«æ·é”®å¦‚ä½•åˆ©ç”¨ç„¦ç‚¹

```typescript
// ğŸ“ keybinding-service.ts

interface KeyBinding {
  key: string;
  command: string;
  when?: string;  // ğŸ”¥ æ¡ä»¶è¡¨è¾¾å¼
}

export class KeyBindingService {
  private bindings: KeyBinding[] = [
    // ğŸ”¥ Cmd+A åœ¨ä¸åŒé¢æ¿æœ‰ä¸åŒè¡Œä¸º
    {
      key: 'cmd+a',
      command: 'editor.selectAll',
      when: 'editorFocus'  // åªåœ¨ç¼–è¾‘å™¨æœ‰ç„¦ç‚¹æ—¶ç”Ÿæ•ˆ
    },
    {
      key: 'cmd+a',
      command: 'fileTree.selectAll',
      when: 'fileTreeFocus'
    },
    
    // ğŸ”¥ Agent å¿«æ·é”®ï¼ˆåªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ç”Ÿæ•ˆï¼‰
    {
      key: 'cmd+shift+a',
      command: 'agent.explainSelection',
      when: 'editorFocus && editorHasSelection'
    },
    {
      key: 'cmd+.',
      command: 'agent.quickFix',
      when: 'editorFocus'
    },
  ];
  
  constructor(private focusManager: FocusManager) {
    this.setupKeyboardListener();
  }
  
  private setupKeyboardListener() {
    // ğŸ”¥ åœ¨æ•è·é˜¶æ®µæ‹¦æˆª
    document.addEventListener('keydown', (e) => {
      const keyCombo = this.getKeyCombo(e);
      const command = this.resolveCommand(keyCombo);
      
      if (command) {
        e.preventDefault();
        e.stopPropagation();
        this.executeCommand(command);
      }
    }, true);  // æ•è·é˜¶æ®µ
  }
  
  private resolveCommand(keyCombo: string): string | null {
    const matching = this.bindings.filter(b => b.key === keyCombo);
    
    // ğŸ”¥ æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ when æ¡ä»¶çš„
    for (const binding of matching) {
      if (!binding.when || this.focusManager.evaluate(binding.when)) {
        return binding.command;
      }
    }
    
    return null;
  }
}
```

**æ ¸å¿ƒä»·å€¼**ï¼š
- âœ… Agent å®æ—¶çŸ¥é“ç”¨æˆ·åœ¨å“ªä¸ªé¢æ¿
- âœ… Agent çŸ¥é“ç”¨æˆ·é€‰ä¸­äº†ä»€ä¹ˆå†…å®¹
- âœ… Agent çŸ¥é“å…‰æ ‡åœ¨å“ªä¸€è¡Œ
- âœ… å¿«æ·é”®æ ¹æ®ç„¦ç‚¹æ™ºèƒ½å“åº”
- âœ… é¿å… Cmd+A é€‰ä¸­æ•´ä¸ªé¡µé¢çš„é—®é¢˜

**ä¾æ®æ¥æº**ï¼š
- VSCode çš„ Context Key Service å®ç°
- [VSCode When Clause æ–‡æ¡£](https://code.visualstudio.com/api/references/when-clause-contexts)

---

### 7ï¸âƒ£ Agent Skillsï¼šAgent å¦‚ä½•è·å¾—ä¸“ä¸šèƒ½åŠ›ï¼ŸğŸ”¥

#### ä»€ä¹ˆæ˜¯ Agent Skillsï¼Ÿ

æ ¹æ® [Anthropic å®˜æ–¹å®šä¹‰](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)ï¼š

> **Agent Skills are organized folders of instructions, scripts, and resources that agents can discover and load dynamically to perform better at specific tasks.**

ç®€å•æ¥è¯´ï¼š**Skills å°±åƒç»™ Agent çš„"å…¥èŒåŸ¹è®­æ‰‹å†Œ"**ï¼ŒæŠŠä½ çš„ä¸“ä¸šçŸ¥è¯†æ‰“åŒ…æˆå¯å¤ç”¨çš„èƒ½åŠ›ã€‚

#### æ ¸å¿ƒè®¾è®¡åŸç†ï¼šæ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰ğŸ”¥

è¿™æ˜¯ Agent Skills æœ€é‡è¦çš„è®¾è®¡åŸåˆ™ï¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  System Prompt (å¯åŠ¨æ—¶)                                  â”‚
â”‚  åªåŠ è½½æ‰€æœ‰ Skills çš„ name + description                 â”‚
â”‚                                                          â”‚
â”‚  ğŸ“¦ PDF Skill: Fill PDF forms and extract fields        â”‚
â”‚  ğŸ“¦ Code Review Skill: Review code and suggest fixes    â”‚
â”‚  ğŸ“¦ Data Analysis Skill: Analyze CSV and generate viz   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ ç”¨æˆ·ä»»åŠ¡ï¼š"å¸®æˆ‘å¡«å†™è¿™ä¸ª PDF è¡¨å•"
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Level 1 åˆ¤æ–­ï¼šAgent æ£€æŸ¥ description                     â”‚
â”‚  â†’ "PDF Skill" åŒ¹é…ï¼è§¦å‘åŠ è½½                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Level 2 åŠ è½½ï¼šè¯»å– SKILL.md å®Œæ•´å†…å®¹                     â”‚
â”‚                                                          â”‚
â”‚  # PDF Skill                                            â”‚
â”‚  Instructions for reading and analyzing PDFs...         â”‚
â”‚                                                          â”‚
â”‚  ## Form Filling                                        â”‚
â”‚  See `forms.md` for detailed form-filling steps         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ Agent å‘ç°éœ€è¦å¡«è¡¨å•
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Level 3+ æŒ‰éœ€åŠ è½½ï¼šè¯»å– forms.md                        â”‚
â”‚                                                          â”‚
â”‚  # Form Filling Instructions                            â”‚
â”‚  1. Read PDF with extract_forms.py                     â”‚
â”‚  2. For each field...                                   â”‚
â”‚  3. Use fill_form.py to write values                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ éœ€è¦æ‰§è¡Œè„šæœ¬
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Level 4 ä»£ç æ‰§è¡Œï¼šè¿è¡Œ extract_forms.py                 â”‚
â”‚  (ä¸åŠ è½½åˆ°ä¸Šä¸‹æ–‡ï¼Œç›´æ¥æ‰§è¡Œ)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆè¿™ä¸ªè®¾è®¡å¦‚æ­¤é‡è¦ï¼Ÿ**

| ä¼ ç»Ÿæ–¹æ¡ˆ | Agent Skillsï¼ˆæ¸è¿›å¼æŠ«éœ²ï¼‰ |
|---------|-------------------------|
| âŒ æŠŠæ‰€æœ‰æ–‡æ¡£éƒ½å¡è¿› system prompt | âœ… åªåŠ è½½ name + description |
| âŒ ä¸Šä¸‹æ–‡å¾ˆå¿«å°±æ»¡äº† | âœ… æŒ‰éœ€åŠ è½½ï¼Œç†è®ºä¸Šæ— é™æ‰©å±• |
| âŒ æ— å…³ä¿¡æ¯æµªè´¹ tokens | âœ… åªåŠ è½½ç›¸å…³çš„å†…å®¹ |
| âŒ Agent è¢«å¤§é‡ä¿¡æ¯æ·¹æ²¡ | âœ… Agent ä¸“æ³¨äºå½“å‰ä»»åŠ¡ |

#### Agent Skills ç›®å½•ç»“æ„

```bash
skills/
â”œâ”€â”€ pdf-manipulation/
â”‚   â”œâ”€â”€ SKILL.md           # ğŸ”¥ å¿…é¡»ï¼æ ¸å¿ƒæ–‡ä»¶
â”‚   â”œâ”€â”€ reference.md       # å¯é€‰ï¼šæŠ€æœ¯å‚è€ƒ
â”‚   â”œâ”€â”€ forms.md           # å¯é€‰ï¼šè¡¨å•å¡«å†™è¯¦ç»†æ­¥éª¤
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ extract.py     # å¯é€‰ï¼šæå–è¡¨å•å­—æ®µ
â”‚       â””â”€â”€ fill.py        # å¯é€‰ï¼šå¡«å†™è¡¨å•
â”‚
â”œâ”€â”€ code-review/
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”œâ”€â”€ best-practices.md
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ lint.sh
â”‚
â””â”€â”€ data-analysis/
    â”œâ”€â”€ SKILL.md
    â”œâ”€â”€ visualization.md
    â””â”€â”€ scripts/
        â””â”€â”€ plot.py
```

#### SKILL.md æ ‡å‡†æ ¼å¼

```markdown
---
name: PDF Manipulation
description: Fill out PDF forms and extract form fields
version: 1.0.0
author: your-name
tags: [pdf, forms, automation]
---

# PDF Manipulation Skill

This skill enables Claude to work with PDF documents effectively.

## Capabilities

- Read and analyze PDF structure
- Extract form fields and their types
- Fill out PDF forms programmatically
- Validate form data

## Usage

When you need to manipulate a PDF:

1. First, read the PDF to understand its structure
2. Use `extract_forms.py` to get all form fields
3. Fill fields using `fill_form.py`

## Form Filling

For detailed form-filling instructions, see `forms.md`.

## Technical Details

See `reference.md` for PDF specification details.

## Scripts

- `scripts/extract.py`: Extract form fields
- `scripts/fill.py`: Fill form fields
- `scripts/validate.py`: Validate form data

## Examples

### Example 1: Extract all form fields

```bash
python scripts/extract.py input.pdf
```

### Example 2: Fill a form

```bash
python scripts/fill.py input.pdf output.pdf --data form-data.json
```
```

#### Skills èƒŒåçš„æ ¸å¿ƒèƒ½åŠ›

##### 1ï¸âƒ£ åŠ¨æ€åŠ è½½æœºåˆ¶

```typescript
// ğŸ“ skills-loader.ts

export class SkillsLoader {
  private installedSkills: Map<string, SkillMetadata> = new Map();
  
  // ğŸ”¥ å¯åŠ¨æ—¶ï¼šåªåŠ è½½ metadataï¼ˆLevel 1ï¼‰
  async loadAllSkillsMetadata() {
    const skillDirs = await fs.readdir('./skills');
    
    for (const dir of skillDirs) {
      const skillPath = `./skills/${dir}/SKILL.md`;
      const content = await fs.readFile(skillPath, 'utf-8');
      
      // è§£æ YAML frontmatter
      const { name, description, version, tags } = parseYAMLFrontmatter(content);
      
      this.installedSkills.set(name, {
        name,
        description,
        version,
        tags,
        path: skillPath,
        directory: `./skills/${dir}`
      });
    }
    
    console.log(`[Skills] åŠ è½½äº† ${this.installedSkills.size} ä¸ª Skills çš„ metadata`);
  }
  
  // ğŸ”¥ ç”Ÿæˆ System Promptï¼ˆåŒ…å«æ‰€æœ‰ Skills çš„ name + descriptionï¼‰
  generateSystemPrompt(): string {
    const skillsList = Array.from(this.installedSkills.values())
      .map(skill => `- **${skill.name}**: ${skill.description}`)
      .join('\n');
    
    return `
You have access to the following skills:

${skillsList}

When a task requires specialized knowledge:
1. Identify which skill is relevant based on the description
2. Read the SKILL.md file to get detailed instructions
3. Follow the instructions in the skill
4. Load additional files from the skill if needed
5. Execute scripts from the skill if needed

Remember: Skills are your specialized training. Use them!
    `.trim();
  }
  
  // ğŸ”¥ Level 2: åŠ è½½å®Œæ•´çš„ SKILL.md
  async loadSkillContent(skillName: string): Promise<string> {
    const skill = this.installedSkills.get(skillName);
    if (!skill) throw new Error(`Skill not found: ${skillName}`);
    
    const content = await fs.readFile(skill.path, 'utf-8');
    
    // ç§»é™¤ YAML frontmatterï¼Œåªè¿”å› markdown å†…å®¹
    const markdownContent = content.replace(/^---[\s\S]*?---\n/, '');
    
    console.log(`[Skills] åŠ è½½äº† Skill: ${skillName}`);
    return markdownContent;
  }
  
  // ğŸ”¥ Level 3+: åŠ è½½ Skill ä¸­çš„é¢å¤–æ–‡ä»¶
  async loadSkillFile(skillName: string, fileName: string): Promise<string> {
    const skill = this.installedSkills.get(skillName);
    if (!skill) throw new Error(`Skill not found: ${skillName}`);
    
    const filePath = `${skill.directory}/${fileName}`;
    const content = await fs.readFile(filePath, 'utf-8');
    
    console.log(`[Skills] åŠ è½½äº† ${skillName} çš„æ–‡ä»¶: ${fileName}`);
    return content;
  }
  
  // ğŸ”¥ æ‰§è¡Œ Skill ä¸­çš„ä»£ç 
  async executeSkillScript(
    skillName: string, 
    scriptPath: string, 
    args: string[]
  ): Promise<string> {
    const skill = this.installedSkills.get(skillName);
    if (!skill) throw new Error(`Skill not found: ${skillName}`);
    
    const fullPath = `${skill.directory}/${scriptPath}`;
    
    // æ‰§è¡Œè„šæœ¬ï¼ˆä¸åŠ è½½åˆ°ä¸Šä¸‹æ–‡ï¼‰
    const result = await executeScript(fullPath, args);
    
    console.log(`[Skills] æ‰§è¡Œäº† ${skillName} çš„è„šæœ¬: ${scriptPath}`);
    return result;
  }
}
```

##### 2ï¸âƒ£ Agent é›†æˆ

```typescript
// ğŸ“ agent-service.ts

export class AgentService {
  private skillsLoader: SkillsLoader;
  private systemPrompt: string;
  
  async initialize() {
    // ğŸ”¥ åŠ è½½æ‰€æœ‰ Skills çš„ metadata
    await this.skillsLoader.loadAllSkillsMetadata();
    
    // ğŸ”¥ ç”ŸæˆåŒ…å« Skills çš„ system prompt
    this.systemPrompt = this.skillsLoader.generateSystemPrompt();
  }
  
  async chat(userMessage: string): Promise<string> {
    const messages = [
      { role: 'system', content: this.systemPrompt },  // åŒ…å« Skills metadata
      { role: 'user', content: userMessage }
    ];
    
    // è°ƒç”¨ AI
    const response = await aiService.chat(messages);
    
    // ğŸ”¥ æ£€æµ‹ Agent æ˜¯å¦æƒ³åŠ è½½ Skill
    if (response.includes('READ_SKILL:')) {
      const skillName = extractSkillName(response);
      const skillContent = await this.skillsLoader.loadSkillContent(skillName);
      
      // å°† Skill å†…å®¹æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ï¼Œç»§ç»­å¯¹è¯
      messages.push(
        { role: 'assistant', content: response },
        { role: 'user', content: skillContent }
      );
      
      return await aiService.chat(messages);
    }
    
    return response;
  }
}
```

##### 3ï¸âƒ£ å·¥å…·æ³¨å†Œæœºåˆ¶

```typescript
// ğŸ“ skills-tools.ts

// ğŸ”¥ å°† Skills ä¸­çš„æ“ä½œæ³¨å†Œä¸º AI å·¥å…·

export function registerSkillsTools(skillsLoader: SkillsLoader) {
  return [
    {
      name: 'read_skill',
      description: 'Read the full content of a skill to get detailed instructions',
      parameters: {
        type: 'object',
        properties: {
          skill_name: {
            type: 'string',
            description: 'Name of the skill to read'
          }
        },
        required: ['skill_name']
      },
      execute: async ({ skill_name }) => {
        return await skillsLoader.loadSkillContent(skill_name);
      }
    },
    {
      name: 'read_skill_file',
      description: 'Read an additional file from a skill (e.g., reference.md)',
      parameters: {
        type: 'object',
        properties: {
          skill_name: { type: 'string' },
          file_name: { type: 'string', description: 'e.g., reference.md, forms.md' }
        },
        required: ['skill_name', 'file_name']
      },
      execute: async ({ skill_name, file_name }) => {
        return await skillsLoader.loadSkillFile(skill_name, file_name);
      }
    },
    {
      name: 'execute_skill_script',
      description: 'Execute a script from a skill',
      parameters: {
        type: 'object',
        properties: {
          skill_name: { type: 'string' },
          script_path: { type: 'string', description: 'e.g., scripts/extract.py' },
          args: { type: 'array', items: { type: 'string' } }
        },
        required: ['skill_name', 'script_path']
      },
      execute: async ({ skill_name, script_path, args = [] }) => {
        return await skillsLoader.executeSkillScript(skill_name, script_path, args);
      }
    }
  ];
}
```

##### 4ï¸âƒ£ Skills ä¸ MCP çš„äº’è¡¥å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               MCP Server (æä¾›å·¥å…·)                       â”‚
â”‚                                                          â”‚
â”‚  - File System: read/write files                        â”‚
â”‚  - Database: query SQL                                  â”‚
â”‚  - API Client: HTTP requests                            â”‚
â”‚  - Browser: control Playwright                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ æä¾›åŸå­æ“ä½œ
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Agent Skills (æ•™å¦‚ä½•ç»„åˆå·¥å…·)                  â”‚
â”‚                                                          â”‚
â”‚  PDF Skill:                                             â”‚
â”‚  1. Use file_system.read to load PDF                   â”‚
â”‚  2. Use scripts/extract.py to parse                    â”‚
â”‚  3. Use file_system.write to save result               â”‚
â”‚                                                          â”‚
â”‚  Web Scraping Skill:                                    â”‚
â”‚  1. Use browser.navigate to open page                  â”‚
â”‚  2. Use browser.wait_for_selector                      â”‚
â”‚  3. Use browser.extract_text                           â”‚
â”‚  4. Use database.insert to save data                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ æä¾›å·¥ä½œæµ
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Agent æ‰§è¡Œä»»åŠ¡                          â”‚
â”‚                                                          â”‚
â”‚  ç”¨æˆ·ï¼š"å¸®æˆ‘ä»è¿™ä¸ªç½‘ç«™æŠ“å–æ•°æ®å¹¶ä¿å­˜åˆ°æ•°æ®åº“"              â”‚
â”‚    â†“                                                     â”‚
â”‚  Agent åŠ è½½ "Web Scraping Skill"                        â”‚
â”‚    â†“                                                     â”‚
â”‚  æŒ‰ç…§ Skill æŒ‡å¯¼ï¼Œä½¿ç”¨ MCP å·¥å…·å®Œæˆä»»åŠ¡                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ç†è§£**ï¼š
- **MCP = å·¥å…·ç®±**ï¼ˆæä¾›é”¤å­ã€èºä¸åˆ€ã€æ‰³æ‰‹ï¼‰
- **Skills = æ–½å·¥æ‰‹å†Œ**ï¼ˆæ•™ä½ å¦‚ä½•ç”¨è¿™äº›å·¥å…·ç›–æˆ¿å­ï¼‰
- **Agent = å·¥äºº**ï¼ˆçœ‹ç€æ‰‹å†Œï¼Œä½¿ç”¨å·¥å…·å®Œæˆä»»åŠ¡ï¼‰

##### 5ï¸âƒ£ Skills ç¼–è¾‘å™¨ UI

```typescript
// ğŸ“ skills-editor.tsx

export function SkillsEditor() {
  const [selectedSkill, setSelectedSkill] = useState<string | null>(null);
  const [skillContent, setSkillContent] = useState('');
  
  return (
    <div className="skills-editor">
      {/* å·¦ä¾§ï¼šSkills åˆ—è¡¨ */}
      <div className="skills-list">
        <h3>Installed Skills</h3>
        <SkillsList onSelect={setSelectedSkill} />
        <button onClick={createNewSkill}>+ New Skill</button>
      </div>
      
      {/* å³ä¾§ï¼šMonaco ç¼–è¾‘å™¨ */}
      <div className="skill-editor">
        {selectedSkill ? (
          <>
            <h3>Editing: {selectedSkill}</h3>
            <MonacoEditor
              language="markdown"
              value={skillContent}
              onChange={setSkillContent}
              options={{
                minimap: { enabled: false },
                wordWrap: 'on',
                lineNumbers: 'on'
              }}
            />
            <button onClick={() => saveSkill(selectedSkill, skillContent)}>
              Save Skill
            </button>
          </>
        ) : (
          <div className="placeholder">
            Select a skill to edit or create a new one
          </div>
        )}
      </div>
    </div>
  );
}
```

#### å®é™…å·¥ä½œæµç¨‹ç¤ºä¾‹

```
ç”¨æˆ·ï¼š"å¸®æˆ‘å¡«å†™è¿™ä¸ª PDF è¡¨å•"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Agent æ£€æŸ¥ System Prompt ä¸­çš„ Skills            â”‚
â”‚                                                          â”‚
â”‚ å‘ç°ï¼šPDF Manipulation - Fill PDF forms and extract    â”‚
â”‚ â†’ è¿™ä¸ª Skill ç›¸å…³ï¼                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Agent è°ƒç”¨ read_skill å·¥å…·                      â”‚
â”‚                                                          â”‚
â”‚ read_skill({ skill_name: "PDF Manipulation" })         â”‚
â”‚ â†’ è¿”å› SKILL.md çš„å®Œæ•´å†…å®¹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Agent é˜…è¯» Skill å†…å®¹                           â”‚
â”‚                                                          â”‚
â”‚ "For form filling, see forms.md"                       â”‚
â”‚ â†’ Agent å†³å®šéœ€è¦æ›´å¤šç»†èŠ‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Agent è°ƒç”¨ read_skill_file å·¥å…·                 â”‚
â”‚                                                          â”‚
â”‚ read_skill_file({                                       â”‚
â”‚   skill_name: "PDF Manipulation",                      â”‚
â”‚   file_name: "forms.md"                                â”‚
â”‚ })                                                       â”‚
â”‚ â†’ è¿”å›è¯¦ç»†çš„è¡¨å•å¡«å†™æ­¥éª¤                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Agent æŒ‰ç…§ Skill æŒ‡å¯¼æ‰§è¡Œ                        â”‚
â”‚                                                          â”‚
â”‚ 1. execute_skill_script({                              â”‚
â”‚      skill_name: "PDF Manipulation",                   â”‚
â”‚      script_path: "scripts/extract.py",                â”‚
â”‚      args: ["input.pdf"]                               â”‚
â”‚    })                                                    â”‚
â”‚    â†’ è·å–è¡¨å•å­—æ®µåˆ—è¡¨                                    â”‚
â”‚                                                          â”‚
â”‚ 2. è¯¢é—®ç”¨æˆ·æ¯ä¸ªå­—æ®µçš„å€¼                                  â”‚
â”‚                                                          â”‚
â”‚ 3. execute_skill_script({                              â”‚
â”‚      skill_name: "PDF Manipulation",                   â”‚
â”‚      script_path: "scripts/fill.py",                   â”‚
â”‚      args: ["input.pdf", "output.pdf", "data.json"]   â”‚
â”‚    })                                                    â”‚
â”‚    â†’ å¡«å†™è¡¨å•å¹¶ç”Ÿæˆæ–° PDF                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: å®Œæˆä»»åŠ¡                                         â”‚
â”‚                                                          â”‚
â”‚ "å·²å®Œæˆï¼ç”Ÿæˆçš„ PDF åœ¨ output.pdf"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Agent Skills çš„æ ¸å¿ƒä»·å€¼

| èƒ½åŠ› | è¯´æ˜ | ä»·å€¼ |
|------|------|------|
| **æ— é™æ‰©å±•** | æ¸è¿›å¼æŠ«éœ²æ”¯æŒæ— é™å¤šçš„ Skills | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| **æŒ‰éœ€åŠ è½½** | åªåŠ è½½ç›¸å…³å†…å®¹ï¼ŒèŠ‚çœ tokens | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| **ä»£ç æ‰§è¡Œ** | Skills å¯ä»¥åŒ…å«å¯æ‰§è¡Œè„šæœ¬ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| **æ ‡å‡†åŒ–** | ç»Ÿä¸€çš„ SKILL.md æ ¼å¼ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| **å¯ç»„åˆ** | Skills å¯ä»¥å¼•ç”¨å…¶ä»– Skills | ğŸ”¥ğŸ”¥ğŸ”¥ |
| **å¯åˆ†äº«** | æ ‡å‡†æ ¼å¼è®© Skills å¯è·¨å¹³å° | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| **å¯ç»´æŠ¤** | æ–‡ä»¶ç»„ç»‡æ¸…æ™°ï¼Œæ˜“äºæ›´æ–° | ğŸ”¥ğŸ”¥ğŸ”¥ |

**ä¾æ®æ¥æº**ï¼š
- [Anthropic Agent Skills å®˜æ–¹åšå®¢](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)
- [Agent Skills å¼€æ”¾æ ‡å‡†](https://anthropic.com) (2025å¹´12æœˆ18æ—¥å‘å¸ƒ)

---

### 8ï¸âƒ£ Decoration APIï¼šAgent å¦‚ä½•å®æ—¶æ ‡æ³¨å»ºè®®ï¼ŸğŸ”¥

#### ä¸ºä»€ä¹ˆè¿™æ˜¯ Agent Workbench çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ

**Agent éœ€è¦åœ¨ç¼–è¾‘å™¨ä¸­å®æ—¶æ˜¾ç¤º**ï¼š
- âœ… æ­£åœ¨åˆ†æçš„ä»£ç ï¼ˆè„‰åŠ¨æ•ˆæœï¼‰
- âœ… å‘ç°çš„é—®é¢˜ï¼ˆçº¢è‰²æ³¢æµªçº¿ï¼‰
- âœ… æ”¹è¿›å»ºè®®ï¼ˆğŸ’¡ ç¯æ³¡å›¾æ ‡ï¼‰
- âœ… æ‰§è¡Œè¿›åº¦ï¼ˆâœ… âŒ â³ï¼‰
- âœ… Diff é¢„è§ˆï¼ˆå†…è”æ˜¾ç¤ºä¿®æ”¹å‰åå¯¹æ¯”ï¼‰

**æ²¡æœ‰ Decoration API**ï¼š
- âŒ Agent å»ºè®®åªèƒ½æ˜¾ç¤ºåœ¨ Chatbot ä¸­
- âŒ ç”¨æˆ·éœ€è¦æ¥å›åˆ‡æ¢æ³¨æ„åŠ›
- âŒ æ— æ³•ç›´è§‚çœ‹åˆ°å»ºè®®çš„ä½ç½®

**æœ‰äº† Decoration API**ï¼š
- âœ… Agent å»ºè®®ç›´æ¥æ˜¾ç¤ºåœ¨ä»£ç æ—è¾¹
- âœ… ä¸€çœ¼çœ‹åˆ°é—®é¢˜ä½ç½®
- âœ… ç‚¹å‡»å³å¯åº”ç”¨å»ºè®®
- âœ… å®æ—¶çœ‹åˆ°æ‰§è¡Œè¿›åº¦

#### Monaco Decoration API æ ¸å¿ƒèƒ½åŠ›

```typescript
// ğŸ“ agent-decoration-manager.ts

export class AgentDecorationManager {
  private editor: monaco.editor.IStandaloneCodeEditor;
  private decorations: string[] = [];
  
  constructor(editor: monaco.editor.IStandaloneCodeEditor) {
    this.editor = editor;
  }
  
  // 1ï¸âƒ£ æ ‡æ³¨ Agent æ­£åœ¨åˆ†æçš„ä»£ç 
  highlightAnalyzing(range: monaco.Range) {
    this.decorations = this.editor.deltaDecorations(this.decorations, [{
      range: range,
      options: {
        className: 'agent-analyzing',  // CSS è„‰åŠ¨åŠ¨ç”»
        glyphMarginClassName: 'agent-icon-analyzing',  // è¡Œå·åŒºåŸŸå›¾æ ‡
        hoverMessage: { 
          value: 'ğŸ¤– **Agent æ­£åœ¨åˆ†æ...**' 
        }
      }
    }]);
  }
  
  // 2ï¸âƒ£ æ ‡æ³¨ Agent çš„å»ºè®®ï¼ˆæœ€é‡è¦ï¼‰
  showSuggestion(
    range: monaco.Range, 
    suggestion: { 
      title: string; 
      message: string; 
      fix?: string 
    }
  ) {
    this.decorations = this.editor.deltaDecorations(this.decorations, [{
      range: range,
      options: {
        className: 'agent-suggestion',
        glyphMarginClassName: 'codicon-lightbulb',  // ğŸ’¡ å›¾æ ‡
        glyphMarginHoverMessage: { value: 'ç‚¹å‡»æŸ¥çœ‹ Agent å»ºè®®' },
        
        // ğŸ”¥ æ‚¬åœæç¤º
        hoverMessage: {
          value: [
            `ğŸ’¡ **${suggestion.title}**`,
            '',
            suggestion.message,
            '',
            suggestion.fix ? '```typescript\n' + suggestion.fix + '\n```' : '',
            '',
            '[åº”ç”¨å»ºè®®](command:agent.applySuggestion)',
            '[å¿½ç•¥](command:agent.dismissSuggestion)'
          ].join('\n')
        },
        
        // ğŸ”¥ è¡Œå†…å°éƒ¨ä»¶ï¼ˆæ˜¾ç¤ºåœ¨ä»£ç å³ä¾§ï¼‰
        after: {
          contentText: ' ğŸ¤– Agent å»ºè®®',
          inlineClassName: 'agent-inline-hint',
          cursorStops: monaco.editor.InjectedTextCursorStops.None
        }
      }
    }]);
  }
  
  // 3ï¸âƒ£ æ ‡æ³¨å‘ç°çš„é—®é¢˜
  showIssue(
    range: monaco.Range, 
    issue: { 
      severity: 'error' | 'warning'; 
      title: string; 
      message: string 
    }
  ) {
    this.decorations = this.editor.deltaDecorations(this.decorations, [{
      range: range,
      options: {
        className: issue.severity === 'error' ? 'agent-error' : 'agent-warning',
        
        // ğŸ”¥ æ³¢æµªçº¿ï¼ˆç±»ä¼¼ VSCode çš„é”™è¯¯æç¤ºï¼‰
        inlineClassName: issue.severity === 'error' ? 
          'squiggly-error' : 'squiggly-warning',
        
        glyphMarginClassName: issue.severity === 'error' ? 
          'codicon-error' : 'codicon-warning',
        
        hoverMessage: {
          value: `${issue.severity === 'error' ? 'âŒ' : 'âš ï¸'} **${issue.title}**\n\n${issue.message}`
        }
      }
    }]);
  }
  
  // 4ï¸âƒ£ æ˜¾ç¤ºæ‰§è¡Œè¿›åº¦ï¼ˆåœ¨è¡Œå·åŒºåŸŸï¼‰
  showExecutionProgress(
    line: number, 
    status: 'running' | 'success' | 'error',
    message?: string
  ) {
    const statusConfig = {
      running: { icon: 'sync~spin', class: 'running', text: 'æ‰§è¡Œä¸­...' },
      success: { icon: 'check', class: 'success', text: 'æ‰§è¡ŒæˆåŠŸ' },
      error: { icon: 'error', class: 'error', text: 'æ‰§è¡Œå¤±è´¥' }
    }[status];
    
    this.decorations = this.editor.deltaDecorations(this.decorations, [{
      range: new monaco.Range(line, 1, line, 1),
      options: {
        glyphMarginClassName: `codicon-${statusConfig.icon} agent-exec-${statusConfig.class}`,
        glyphMarginHoverMessage: { 
          value: `${status === 'running' ? 'â³' : status === 'success' ? 'âœ…' : 'âŒ'} ${message || statusConfig.text}` 
        }
      }
    }]);
  }
  
  // 5ï¸âƒ£ å†…è” Diff é¢„è§ˆï¼ˆæ˜¾ç¤ºä¿®æ”¹å‰åï¼‰
  showInlineDiff(
    range: monaco.Range, 
    oldText: string, 
    newText: string
  ) {
    this.decorations = this.editor.deltaDecorations(this.decorations, [{
      range: range,
      options: {
        className: 'agent-diff-container',
        
        // ğŸ”¥ æ˜¾ç¤ºåˆ é™¤çš„å†…å®¹
        before: {
          contentText: `- ${oldText}`,
          inlineClassName: 'agent-diff-old',
          inlineClassNameAffectsLetterSpacing: true
        },
        
        // ğŸ”¥ æ˜¾ç¤ºæ–°å¢çš„å†…å®¹
        after: {
          contentText: `+ ${newText}`,
          inlineClassName: 'agent-diff-new',
          inlineClassNameAffectsLetterSpacing: true
        }
      }
    }]);
  }
  
  // ğŸ”¥ æ¸…é™¤æ‰€æœ‰è£…é¥°
  clearAll() {
    this.decorations = this.editor.deltaDecorations(this.decorations, []);
  }
  
  // ğŸ”¥ æ¸…é™¤ç‰¹å®šç±»å‹çš„è£…é¥°
  clearByType(type: 'suggestion' | 'error' | 'progress') {
    // å®ç°çœç•¥
  }
}
```

#### Agent ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

```typescript
// ğŸ“ agent-code-analyzer.ts

export class AgentCodeAnalyzer {
  private decorationManager: AgentDecorationManager;
  
  async analyzeCode(editor: monaco.editor.IStandaloneCodeEditor) {
    const model = editor.getModel();
    if (!model) return;
    
    const code = model.getValue();
    
    // ğŸ”¥ åœºæ™¯ 1ï¼šåˆ†æä¸­åŠ¨ç”»
    const fullRange = model.getFullModelRange();
    this.decorationManager.highlightAnalyzing(fullRange);
    
    try {
      // è°ƒç”¨ AI åˆ†æ
      const analysis = await aiService.analyzeCode(code);
      
      // æ¸…é™¤åˆ†æä¸­åŠ¨ç”»
      this.decorationManager.clearAll();
      
      // ğŸ”¥ åœºæ™¯ 2ï¼šæ ‡æ³¨å‘ç°çš„é—®é¢˜
      for (const issue of analysis.issues) {
        const range = new monaco.Range(
          issue.startLine, 
          issue.startColumn,
          issue.endLine, 
          issue.endColumn
        );
        
        this.decorationManager.showIssue(range, {
          severity: issue.severity,
          title: issue.title,
          message: issue.message
        });
      }
      
      // ğŸ”¥ åœºæ™¯ 3ï¼šæ ‡æ³¨æ”¹è¿›å»ºè®®
      for (const suggestion of analysis.suggestions) {
        const range = new monaco.Range(
          suggestion.startLine,
          suggestion.startColumn,
          suggestion.endLine,
          suggestion.endColumn
        );
        
        this.decorationManager.showSuggestion(range, {
          title: suggestion.title,
          message: suggestion.message,
          fix: suggestion.fixCode
        });
      }
      
    } catch (error) {
      console.error('åˆ†æå¤±è´¥:', error);
    }
  }
  
  // ğŸ”¥ åœºæ™¯ 4ï¼šæ‰§è¡Œ Agent å»ºè®®æ—¶æ˜¾ç¤ºè¿›åº¦
  async applySuggestion(suggestion: Suggestion) {
    const line = suggestion.startLine;
    
    // æ˜¾ç¤ºæ‰§è¡Œä¸­
    this.decorationManager.showExecutionProgress(line, 'running');
    
    try {
      // æ‰§è¡Œä¿®æ”¹
      await this.applyFix(suggestion.fixCode);
      
      // æ˜¾ç¤ºæˆåŠŸ
      this.decorationManager.showExecutionProgress(line, 'success', 'å·²åº”ç”¨å»ºè®®');
      
      // 3 ç§’åæ¸…é™¤
      setTimeout(() => {
        this.decorationManager.clearByType('progress');
      }, 3000);
      
    } catch (error) {
      // æ˜¾ç¤ºå¤±è´¥
      this.decorationManager.showExecutionProgress(
        line, 
        'error', 
        `åº”ç”¨å¤±è´¥: ${error.message}`
      );
    }
  }
  
  // ğŸ”¥ åœºæ™¯ 5ï¼šå®æ—¶ Diff é¢„è§ˆ
  showDiffPreview(range: monaco.Range, oldCode: string, newCode: string) {
    this.decorationManager.showInlineDiff(range, oldCode, newCode);
  }
}
```

#### CSS æ ·å¼é…ç½®

```css
/* agent-decorations.css */

/* 1. åˆ†æä¸­åŠ¨ç”» */
.agent-analyzing {
  background-color: rgba(135, 206, 250, 0.2);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.2; }
  50% { opacity: 0.6; }
}

/* 2. Agent å»ºè®®é«˜äº® */
.agent-suggestion {
  background-color: rgba(255, 215, 0, 0.15);
  border-bottom: 2px solid #ffd700;
}

/* 3. å†…è”æç¤º */
.agent-inline-hint {
  color: #888;
  font-size: 0.85em;
  font-style: italic;
  margin-left: 8px;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.agent-inline-hint:hover {
  opacity: 1;
  color: #007acc;
  text-decoration: underline;
}

/* 4. é”™è¯¯æ³¢æµªçº¿ */
.squiggly-error {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 3"><path d="M0 3 L3 0 L6 3" fill="none" stroke="%23f14c4c" stroke-width="0.6"/></svg>');
  background-repeat: repeat-x;
  background-position: bottom;
  background-size: 6px 3px;
}

.squiggly-warning {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 3"><path d="M0 3 L3 0 L6 3" fill="none" stroke="%23cca700" stroke-width="0.6"/></svg>');
  background-repeat: repeat-x;
  background-position: bottom;
  background-size: 6px 3px;
}

/* 5. æ‰§è¡ŒçŠ¶æ€å›¾æ ‡ */
.agent-exec-running {
  color: #007acc;
}

.agent-exec-success {
  color: #89d185;
}

.agent-exec-error {
  color: #f14c4c;
}

/* 6. Diff é¢„è§ˆ */
.agent-diff-old {
  color: #f14c4c;
  text-decoration: line-through;
  opacity: 0.7;
}

.agent-diff-new {
  color: #89d185;
  font-weight: 500;
}

.agent-diff-container {
  display: block;
  padding: 2px 0;
  margin: 2px 0;
}
```

#### å®Œæ•´çš„ Agent åé¦ˆæµç¨‹

```
ç”¨æˆ·ç¼–è¾‘ä»£ç 
    â†“
1. Agent æ£€æµ‹åˆ°å˜æ›´ï¼ˆç„¦ç‚¹ç®¡ç†ç³»ç»Ÿï¼‰
    â†“
2. æ˜¾ç¤º"åˆ†æä¸­"åŠ¨ç”»ï¼ˆDecoration APIï¼‰
    â†“
3. è°ƒç”¨ AI åˆ†æä»£ç 
    â†“
4. å‘ç°é—®é¢˜ â†’ æ˜¾ç¤ºçº¢è‰²æ³¢æµªçº¿ï¼ˆDecoration APIï¼‰
    â†“
5. ç”Ÿæˆå»ºè®® â†’ æ˜¾ç¤º ğŸ’¡ å›¾æ ‡ï¼ˆDecoration APIï¼‰
    â†“
6. ç”¨æˆ·ç‚¹å‡» ğŸ’¡ æŸ¥çœ‹å»ºè®®ï¼ˆæ‚¬åœæç¤ºï¼‰
    â†“
7. ç”¨æˆ·ç‚¹å‡»"åº”ç”¨å»ºè®®"
    â†“
8. æ˜¾ç¤º"æ‰§è¡Œä¸­" â³ï¼ˆDecoration APIï¼‰
    â†“
9. åº”ç”¨ä¿®æ”¹
    â†“
10. æ˜¾ç¤º"æˆåŠŸ" âœ…ï¼ˆDecoration APIï¼‰
    â†“
11. 3ç§’åæ¸…é™¤è£…é¥°
```

**æ ¸å¿ƒä»·å€¼**ï¼š
- âœ… Agent åé¦ˆç›´æ¥æ˜¾ç¤ºåœ¨ä»£ç ä¸­
- âœ… ç”¨æˆ·æ— éœ€åˆ‡æ¢æ³¨æ„åŠ›
- âœ… ä¸€é”®åº”ç”¨å»ºè®®
- âœ… å®æ—¶çœ‹åˆ°æ‰§è¡ŒçŠ¶æ€
- âœ… ç±»ä¼¼ VSCode çš„ä¸“ä¸šä½“éªŒ

**ä¾æ®æ¥æº**ï¼š
- [Monaco Editor Decorations API](https://microsoft.github.io/monaco-editor/api/interfaces/monaco.editor.IModelDecorationOptions.html)
- VSCode çš„ä»£ç è£…é¥°ç³»ç»Ÿå®ç°

---

## ğŸš€ æ¨èå®æ–½è·¯å¾„ï¼ˆåŸºäºå·¥ä½œå°æ¶æ„ï¼‰

### Phase 1: åŸºç¡€å·¥ä½œå°ï¼ˆ4-6 å‘¨ï¼‰

**ç›®æ ‡**ï¼šæ­å»ºå¯ç”¨çš„å¤šé¢æ¿æ¡†æ¶

**æŠ€æœ¯æ ˆ**ï¼š
- React + react-mosaicï¼ˆå¸ƒå±€ï¼‰
- Zustandï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
- react-arboristï¼ˆæ–‡ä»¶æ ‘ï¼‰
- BlockNoteï¼ˆæ–‡æ¡£ç¼–è¾‘ï¼‰
- Monaco Editorï¼ˆé…ç½®æŸ¥çœ‹ï¼Œåªè¯»æ¨¡å¼ï¼‰

**äº¤ä»˜ç‰©**ï¼š
```
âœ… ä¸‰æ å¸ƒå±€ï¼ˆå·¦ä¸­å³ï¼‰
âœ… æ–‡ä»¶æ ‘å¯ä»¥åˆ‡æ¢æ–‡æ¡£
âœ… ä¸­é—´åŒºåŸŸæ˜¾ç¤ºæ–‡æ¡£ï¼ˆBlockNoteï¼‰
âœ… å³ä¾§å ä½ Chatbot UIï¼ˆé™æ€ï¼‰
âœ… å¸ƒå±€çŠ¶æ€æŒä¹…åŒ–
```

---

### Phase 2: Agent é›†æˆï¼ˆ2-3 å‘¨ï¼‰

**ç›®æ ‡**ï¼šæ‰“é€š Agent ä¸å·¥ä½œå°çš„äº¤äº’

**æ–°å¢åŠŸèƒ½**ï¼š
- Vercel AI SDK é›†æˆ
- å³ä¾§ Chatbot å®æ—¶å¯¹è¯
- Agent æ£€æµ‹æ–‡æ¡£å˜æ›´
- å·¥å…·è°ƒç”¨ç»“æœåœ¨æ–°é¢æ¿æ˜¾ç¤º

**äº¤ä»˜ç‰©**ï¼š
```
âœ… Chatbot å¯ä»¥ä¸ Agent å¯¹è¯
âœ… Agent å¯ä»¥è¯»å–å½“å‰æ‰“å¼€çš„æ–‡æ¡£
âœ… Agent è°ƒç”¨ Skill åï¼Œåœ¨ä¸­é—´åŒºåŸŸæ‰“å¼€"æ‰§è¡Œæ—¥å¿—"é¢æ¿
âœ… é…ç½®é¢„è§ˆç”¨ Monaco Diff Editor æ˜¾ç¤º
```

---

### Phase 3: æµè§ˆå™¨é¢„è§ˆï¼ˆ1-2 å‘¨ï¼‰

**ç›®æ ‡**ï¼šæ”¯æŒ Web é¡µé¢é¢„è§ˆ

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼š
- iframe åµŒå…¥ï¼ˆWeb ç‰ˆï¼‰
- æˆ– BrowserViewï¼ˆElectron ç‰ˆï¼‰

**äº¤ä»˜ç‰©**ï¼š
```
âœ… å¯ä»¥åœ¨å·¥ä½œå°ä¸­é¢„è§ˆ Agent ç”Ÿæˆçš„ HTML
âœ… å¯ä»¥åœ¨æµè§ˆå™¨é¢æ¿ä¸­æµ‹è¯• Agent é…ç½®çš„åŠŸèƒ½
```

---

### Phase 4: Agent Skills ç”Ÿæ€ï¼ˆ4-6 å‘¨ï¼‰

**ç›®æ ‡**ï¼šå®ç°å®Œæ•´çš„ Agent Skills ç³»ç»Ÿï¼ˆAnthropic æ ‡å‡†ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. Skills ç›®å½•ç»“æ„ï¼ˆSKILL.md æ ¼å¼ï¼‰
2. æ¸è¿›å¼æŠ«éœ²æœºåˆ¶
3. Skills ç¼–è¾‘å™¨ï¼ˆMonaco Editorï¼‰
4. Skills ä¸ MCP é›†æˆ
5. ä»£ç æ‰§è¡Œèƒ½åŠ›

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼š

```typescript
// Skills ç›®å½•ç»“æ„
skills/
â”œâ”€â”€ pdf-manipulation/
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â”œâ”€â”€ forms.md
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ extract.py
â”‚       â””â”€â”€ fill.py
â”œâ”€â”€ code-review/
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â””â”€â”€ best-practices.md
â””â”€â”€ data-analysis/
    â”œâ”€â”€ SKILL.md
    â””â”€â”€ scripts/
        â””â”€â”€ plot.py
```

**äº¤ä»˜ç‰©**ï¼š
```
âœ… Skills ç®¡ç†é¢æ¿
   - æµè§ˆå·²å®‰è£…çš„ Skills
   - æŸ¥çœ‹ Skills metadata
   - åˆ›å»ºæ–° Skills

âœ… Skills ç¼–è¾‘å™¨
   - Monaco Editor ç¼–è¾‘ SKILL.md
   - YAML frontmatter æ”¯æŒ
   - Markdown è¯­æ³•é«˜äº®

âœ… Skills åŠ è½½å™¨
   - å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰ metadata
   - æŒ‰éœ€åŠ è½½å®Œæ•´å†…å®¹
   - æ”¯æŒåŠ è½½é¢å¤–æ–‡ä»¶

âœ… Skills å·¥å…·æ³¨å†Œ
   - read_skill
   - read_skill_file
   - execute_skill_script

âœ… Skills æ‰§è¡Œç›‘æ§
   - æ˜¾ç¤º Agent åŠ è½½äº†å“ªäº› Skills
   - æ˜¾ç¤º Skills ä»£ç æ‰§è¡Œç»“æœ
   - æ‰§è¡Œæ—¥å¿—è¿½è¸ª

âœ… Skills ä¸ MCP é›†æˆ
   - Skills æ•™ Agent å¦‚ä½•ä½¿ç”¨ MCP å·¥å…·
   - å¤æ‚å·¥ä½œæµç¼–æ’
```

**æœªæ¥æ–¹å‘ï¼ˆAnthropic æ„¿æ™¯ï¼‰**ï¼š
```
ğŸ”® Agent è‡ªåŠ¨ç”Ÿæˆ Skills
   - ä»æˆåŠŸç»éªŒä¸­å­¦ä¹ 
   - è‡ªåŠ¨æ›´æ–° SKILL.md
   
ğŸ”® Skills å¸‚åœº
   - åˆ†äº«å’Œå‘ç° Skills
   - Skills è¯„åˆ†å’Œè¯„è®º
   
ğŸ”® Skills è‡ªåŠ¨ä¼˜åŒ–
   - æ ¹æ®æ‰§è¡Œç»“æœæ”¹è¿›
   - A/B æµ‹è¯•ä¸åŒçš„æŒ‡ä»¤
```

---

## ğŸ¯ æœ€ç»ˆæ¨èï¼ˆå·¥ä½œå°æ¶æ„ç‰ˆï¼‰

### å°å¥³å­çš„å»ºè®® ğŸ’¡

#### MVP é˜¶æ®µï¼ˆæ¨èï¼‰â­

```yaml
å¸ƒå±€æ¡†æ¶: React + react-mosaic
æ–‡ä»¶æ ‘: react-arborist
æ–‡æ¡£ç¼–è¾‘: BlockNote
é…ç½®æŸ¥çœ‹: Monaco Editor (Diff View)
æµè§ˆå™¨: iframe
Agent: Vercel AI SDK + MCP
çŠ¶æ€ç®¡ç†: Zustand
éƒ¨ç½²: Web åº”ç”¨ï¼ˆVercel/Netlifyï¼‰
```

**ç†ç”±**ï¼š
- âœ… 6-8 å‘¨å¯ä»¥å®Œæˆæ ¸å¿ƒåŠŸèƒ½
- âœ… æŠ€æœ¯æ ˆè½»é‡ï¼Œå­¦ä¹ æ›²çº¿å‹å¥½
- âœ… å¯ä»¥å¿«é€ŸéªŒè¯"å·¥ä½œå° + Agent"çš„æ ¸å¿ƒä»·å€¼
- âœ… çµæ´»æ€§é«˜ï¼Œæœªæ¥å¯ä»¥è¿ç§»åˆ° Electron

**ä¸æ¨è**ï¼š
- âŒ Eclipse Theiaï¼ˆMVP é˜¶æ®µå¤ªé‡ï¼‰
- âŒ ç›´æ¥ Fork VSCodeï¼ˆç»´æŠ¤æˆæœ¬æé«˜ï¼‰
- âŒ Electronï¼ˆæš‚æ—¶ä¸éœ€è¦æ¡Œé¢ç‰¹æ€§ï¼‰

---

#### ç”Ÿäº§çº§é˜¶æ®µï¼ˆå¦‚æœ MVP æˆåŠŸï¼‰

**é€‰æ‹© A**ï¼šç»§ç»­ä¼˜åŒ– react-mosaic æ–¹æ¡ˆ
- é€‚åˆï¼šå›¢é˜Ÿæƒ³ä¿æŒè½»é‡çº§ï¼Œçµæ´»å®šåˆ¶

**é€‰æ‹© B**ï¼šè¿ç§»åˆ° Eclipse Theia
- é€‚åˆï¼šéœ€è¦ä¼ä¸šçº§æ‰©å±•ç”Ÿæ€ï¼Œæ„¿æ„æŠ•å…¥å­¦ä¹ æˆæœ¬

**é€‰æ‹© C**ï¼šå¼€å‘ Electron æ¡Œé¢ç‰ˆ
- é€‚åˆï¼šç›®æ ‡ç”¨æˆ·éœ€è¦æœ¬åœ°æ–‡ä»¶è®¿é—®ã€ç¦»çº¿ä½¿ç”¨

---

## ğŸ“Š ä¸ä¹‹å‰æ–¹æ¡ˆçš„å¯¹æ¯”

| ç»´åº¦ | ä¹‹å‰æ¨è<br>ï¼ˆçº¯ BlockNoteï¼‰ | ç°åœ¨æ¨è<br>ï¼ˆå·¥ä½œå°æ¶æ„ï¼‰ |
|-----|--------------------------|------------------------|
| **ç¼–è¾‘å™¨** | çº¯ BlockNote | BlockNote + Monaco |
| **å¸ƒå±€** | å•é¡µé¢ç¼–è¾‘å™¨ | å¤šé¢æ¿å·¥ä½œå° |
| **Monaco ä»·å€¼** | âŒ ä¸æ¨è | âœ… å¼ºçƒˆæ¨èï¼ˆDiff Viewï¼‰ |
| **å¤æ‚åº¦** | ä½ | ä¸­ç­‰ |
| **å¼€å‘å‘¨æœŸ** | 2-4 å‘¨ | 6-8 å‘¨ |
| **æ‰©å±•æ€§** | æœ‰é™ | æå¼º |
| **é€‚ç”¨åœºæ™¯** | å•çº¯æ–‡æ¡£ç¼–è¾‘ | å®Œæ•´å·¥ä½œå°åº”ç”¨ âœ… |

**æ ¸å¿ƒå˜åŒ–**ï¼š
- Monaco Editor ä»"ä¸æ¨è"å˜ä¸º"æ ¸å¿ƒç»„ä»¶"
- ä»"ç¼–è¾‘å™¨é€‰å‹"å‡çº§ä¸º"å·¥ä½œå°æ¶æ„è®¾è®¡"
- å¢åŠ äº†å¸ƒå±€ç®¡ç†ã€çŠ¶æ€åŒæ­¥ã€å¤šé¢æ¿åè°ƒç­‰æ–°ç»´åº¦

---

## ğŸ”– å¼•ç”¨æ¥æºå£°æ˜

æœ¬æ–‡æ¡£æ‰€æœ‰æŠ€æœ¯æ–¹æ¡ˆå‡åŸºäº 2026-01-24 çš„æœç´¢éªŒè¯ï¼š

### å·¥ä½œå°æ¡†æ¶
- [Eclipse Theia](https://theia-ide.org/)ï¼ˆ21.3k starsï¼Œ2018-2026ï¼‰
- [VSCode Workbench æ¶æ„æ–‡æ¡£](https://code.visualstudio.com/api/extension-capabilities/extending-workbench)

### å¸ƒå±€ç»„ä»¶
- [react-mosaic](https://github.com/nomcopter/react-mosaic)ï¼ˆ4.2k starsï¼ŒBloomberg å¼€æºï¼‰
- [react-arborist](https://github.com/brimdata/react-arborist)ï¼ˆè™šæ‹Ÿæ»šåŠ¨æ–‡ä»¶æ ‘ï¼‰

### æµè§ˆå™¨åµŒå…¥
- [Electron Web Embeds å®˜æ–¹æ–‡æ¡£](https://electronjs.org/docs/latest/tutorial/web-embeds)ï¼ˆ2026 å¹´æ¨èï¼‰
- Electron å®˜æ–¹æ˜ç¡®ï¼šWebView Tag å¼ƒç”¨ï¼Œæ¨è BrowserView/iframe

### çŠ¶æ€ç®¡ç†
- [Zustand](https://github.com/pmndrs/zustand)ï¼ˆ47.5k starsï¼ŒReact ç¤¾åŒºæ¨èï¼‰

### Chatbot UI
- [react-chatbot-kit](https://fredrikoseberg.github.io/react-chatbot-kit/)ï¼ˆè½»é‡çº§ 20KBï¼‰

**æ— ä»»ä½•çŒœæµ‹** âœ… æ‰€æœ‰æŠ€æœ¯é€‰å‹å‡æœ‰æ˜ç¡®ä¾æ® ğŸ”¥

---

## ğŸ“ æ€»ç»“ï¼šå…³é”®è®¤çŸ¥è½¬å˜

### ä¹‹å‰çš„ç†è§£ âŒ
> "è¿™æ˜¯ä¸€ä¸ªæ–‡æ¡£ç¼–è¾‘å™¨ï¼Œéœ€è¦å—ç¼–è¾‘åŠŸèƒ½"
> â†’ æ¨è BlockNote

### ç°åœ¨çš„ç†è§£ âœ…
> "è¿™æ˜¯ä¸€ä¸ªå·¥ä½œå°åº”ç”¨ï¼Œéœ€è¦å¤šç§ç±»å‹çš„é¢æ¿ï¼š
> - æ–‡æ¡£ç¼–è¾‘ï¼ˆBlockNoteï¼‰
> - é…ç½®é¢„è§ˆï¼ˆMonaco Diffï¼‰
> - æµè§ˆå™¨åµŒå…¥ï¼ˆiframeï¼‰
> - æ‰§è¡Œæ—¥å¿—ï¼ˆMonaco åªè¯»ï¼‰
> - Agent å¯¹è¯ï¼ˆChatbotï¼‰"
> â†’ æ¨èå®Œæ•´å·¥ä½œå°æ¶æ„ï¼ˆreact-mosaic + åŒç¼–è¾‘å™¨ï¼‰

### å¯¹ Monaco Editor è¯„ä»·çš„å˜åŒ– ğŸ”¥

**ä¹‹å‰**ï¼š"Monaco ä¸é€‚åˆæ–‡æ¡£ç¼–è¾‘ï¼Œä¸æ¨è" âŒ

**ç°åœ¨**ï¼š"Monaco æ˜¯å·¥ä½œå°ä¸­é…ç½®é¢„è§ˆã€æ—¥å¿—æŸ¥çœ‹ã€Diff View çš„**æœ€ä½³é€‰æ‹©**" âœ…

---

é“å‹ï¼Œè¿™ä»½æ–°çš„æ¶æ„æ–¹æ¡ˆæ›´ç¬¦åˆä½ çš„å·¥ä½œå°éœ€æ±‚å—ï¼Ÿ âœ¨
