# é¢„è®­ç»ƒä¸å¾®è°ƒï¼šè®­ç»ƒ LLM çš„åŸºç¡€èƒ½åŠ›

> â¬†ï¸ æ”¯æ’‘ **L0ï¼ˆLLM æ¨¡å‹æœ¬è´¨ï¼‰** - ç†è§£å¦‚ä½•è®©æ¨¡å‹ä»æ— åˆ°æœ‰è·å¾—èƒ½åŠ›

---

## ğŸ“š ç›®å½•

1. [é¢„è®­ç»ƒï¼ˆPreTrainï¼‰](#é¢„è®­ç»ƒpretrain)
2. [ä¸­æœŸè®­ç»ƒï¼ˆMid-Trainingï¼‰](#ä¸­æœŸè®­ç»ƒmid-training)
3. [æŒ‡ä»¤å¾®è°ƒï¼ˆSFTï¼‰](#æŒ‡ä»¤å¾®è°ƒsft)
4. [ä¸‰ä¸ªé˜¶æ®µçš„å¯¹æ¯”](#ä¸‰ä¸ªé˜¶æ®µçš„å¯¹æ¯”)
5. [ä¸ LLM çš„å…³ç³»](#ä¸-llm-çš„å…³ç³»)

---

## ğŸ¯ é¢„è®­ç»ƒï¼ˆPreTrainï¼‰

### è®­ç»ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿâ­

**æœ¬è´¨**ï¼šè®©æ¨¡å‹ä»é›¶å¼€å§‹å­¦ä¼šè¯­è¨€è§„å¾‹å’Œä¸–ç•ŒçŸ¥è¯†

```
è®­ç»ƒå‰ï¼š
  æ¨¡å‹å‚æ•° = éšæœºå™ªå£°
  è¾“å…¥ï¼š"çŒ«åœ¨___"
  è¾“å‡ºï¼š"xjk#@!?"  âŒï¼ˆä¹±ç ï¼‰

è®­ç»ƒåï¼š
  æ¨¡å‹å‚æ•° = å‹ç¼©çš„è¯­è¨€çŸ¥è¯†
  è¾“å…¥ï¼š"çŒ«åœ¨___"
  è¾“å‡ºï¼šP("ç¡è§‰": 0.45, "ç©è€": 0.25, "åƒé¥­": 0.15, ...)  âœ…
```

**å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ**

```
1. è¯­æ³•è§„å¾‹
   "çŒ«åœ¨___" â†’ åé¢åº”è¯¥æ˜¯åŠ¨è¯
   "çš„___" â†’ åé¢åº”è¯¥æ˜¯åè¯
   
2. è¯­ä¹‰ç†è§£
   "çŒ«"å’Œ"ç‹—"ç›¸ä¼¼ï¼ˆéƒ½æ˜¯åŠ¨ç‰©ï¼‰
   "çŒ«"å’Œ"è‹¹æœ"ä¸ç›¸ä¼¼
   
3. ä¸–ç•ŒçŸ¥è¯†
   "å·´é»æ˜¯æ³•å›½çš„é¦–éƒ½" âœ…
   "å¤ªé˜³ä»ä¸œæ–¹å‡èµ·" âœ…
   "æ°´åœ¨ 0 åº¦ç»“å†°" âœ…
   
4. åŸºç¡€æ¨ç†
   "å¦‚æœä¸‹é›¨ï¼Œåœ°é¢ä¼š___" â†’ "æ¹¿" âœ…
```

### è®­ç»ƒç›®æ ‡ï¼šNext Token Prediction

```python
# æ ¸å¿ƒå…¬å¼
P(token_t | token_1, token_2, ..., token_t-1)

# å…·ä½“ä¾‹å­
è¾“å…¥åºåˆ—ï¼š"çŒ« åœ¨ ç¡"
ç›®æ ‡é¢„æµ‹ï¼š"è§‰"

è®­ç»ƒæ­¥éª¤ï¼š
  1. æ¨¡å‹çœ‹åˆ°"çŒ« åœ¨ ç¡"
  2. é¢„æµ‹ä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡åˆ†å¸ƒ
     P("è§‰") = 0.7
     P("çœ ") = 0.2
     P("ç€") = 0.1
  3. å®é™…ç­”æ¡ˆæ˜¯"è§‰"
  4. è®¡ç®—æŸå¤±ï¼š-log P("è§‰") = -log(0.7) â‰ˆ 0.36
  5. åå‘ä¼ æ’­ï¼Œè°ƒæ•´å‚æ•°
  6. é‡å¤å‡ ä¸‡äº¿æ¬¡
```

**ä¸ºä»€ä¹ˆè¿™ä¹ˆç®€å•çš„ä»»åŠ¡èƒ½è®­å‡ºèªæ˜çš„æ¨¡å‹ï¼Ÿ**

```
è¦åšå¥½"é¢„æµ‹ä¸‹ä¸€ä¸ªè¯"ï¼Œæ¨¡å‹å¿…é¡»ï¼š

åœºæ™¯ 1ï¼šè¯­æ³•
  "å¤©ç©ºæ˜¯___"
  â†’ å¿…é¡»çŸ¥é“"æ˜¯"åé¢æ¥å½¢å®¹è¯
  â†’ é¢„æµ‹"è“è‰²" âœ…

åœºæ™¯ 2ï¼šè¯­ä¹‰
  "çŒ«åœ¨___"
  â†’ å¿…é¡»çŸ¥é“çŒ«çš„å¸¸è§è¡Œä¸º
  â†’ é¢„æµ‹"ç¡è§‰"(45%) > "é£ç¿”"(0.001%) âœ…

åœºæ™¯ 3ï¼šçŸ¥è¯†
  "å·´é»æ˜¯___çš„é¦–éƒ½"
  â†’ å¿…é¡»è®°ä½åœ°ç†çŸ¥è¯†
  â†’ é¢„æµ‹"æ³•å›½" âœ…

åœºæ™¯ 4ï¼šæ¨ç†
  "å¦‚æœä»Šå¤©ä¸‹é›¨ï¼Œæˆ‘ä¼šå¸¦___"
  â†’ å¿…é¡»ç†è§£å› æœå…³ç³»
  â†’ é¢„æµ‹"é›¨ä¼" âœ…

â†’ ç®€å•ä»»åŠ¡ + æµ·é‡æ•°æ® = æ¶Œç°æ™ºèƒ½ âœ¨
```

### æ•°æ®ç‰¹ç‚¹ï¼šé‡å¤§è´¨ç²—

```
è§„æ¨¡ï¼šä¸‡äº¿ tokensï¼ˆTB çº§ï¼‰

æ•°æ®æ¥æºï¼š
  â”œâ”€ ç½‘é¡µï¼šCommonCrawlï¼ˆå‡ å TBï¼‰
  â”œâ”€ ä¹¦ç±ï¼šBooks3ã€Gutenberg
  â”œâ”€ ä»£ç ï¼šGitHubã€StackOverflow
  â”œâ”€ è®ºæ–‡ï¼šarXivã€PubMed
  â””â”€ å…¶ä»–ï¼šç»´åŸºç™¾ç§‘ã€æ–°é—»ã€å¯¹è¯

è´¨é‡è¦æ±‚ï¼š
  âœ… éœ€è¦æ¸…æ´—ï¼ˆå»é‡ã€å»å™ªï¼‰
  âŒ ä½†ä¸è¿½æ±‚å®Œç¾ï¼ˆå…è®¸ä¸€äº›å™ªå£°ï¼‰
  
å…³é”®æ´å¯Ÿï¼ˆ2024 éªŒè¯ï¼‰ï¼š
  ç²¾é€‰çš„ 1TB æ•°æ® > éšä¾¿æŠ“çš„ 10TB æ•°æ®
  ä»£ç æ•°æ®å¾ˆé‡è¦ï¼ˆæå‡æ¨ç†èƒ½åŠ›ï¼‰
  å»é‡å¾ˆé‡è¦ï¼ˆé˜²æ­¢"èƒŒä¹¦"ï¼‰
```

**æ•°æ®å¤„ç†æµç¨‹**ï¼š

```
åŸå§‹æ•°æ®ï¼ˆç½‘é¡µæŠ“å–ï¼‰
    â†“
å»é‡ï¼ˆç›¸ä¼¼æ–‡æœ¬ä¼šè®©æ¨¡å‹"èƒŒä¹¦"ï¼‰
    â†“
è´¨é‡è¿‡æ»¤ï¼ˆå»æ‰ä¹±ç ã€ä½è´¨å†…å®¹ï¼‰
    â†“
æ¯’æ€§æ£€æµ‹ï¼ˆå»æ‰æš´åŠ›ã€è‰²æƒ…ç­‰ï¼‰
    â†“
æ ¼å¼æ¸…æ´—ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
    â†“
Tokenizationï¼ˆåˆ‡åˆ†æˆ tokensï¼‰
    "çŒ«åœ¨ç¡è§‰" â†’ ["çŒ«", "åœ¨", "ç¡", "è§‰"]
    â†“
æ‰“åŒ…æˆè®­ç»ƒæ•°æ®
    [token_ids, attention_mask, labels]
```

### è®­ç»ƒæˆæœ¬ï¼šæœ€çƒ§é’±ï¼ˆä½† 2024 æœ‰çªç ´ï¼‰

**ä¼ ç»Ÿæˆæœ¬ï¼ˆ2023 å¹´å‰ï¼‰**ï¼š

```
ç¡¬ä»¶ï¼šå‡ åƒåˆ°ä¸Šä¸‡å— GPUï¼ˆA100/H100ï¼‰
æ—¶é—´ï¼šå‡ ä¸ªæœˆ
ç”µè´¹ï¼šå¤©æ–‡æ•°å­—
æ€»æˆæœ¬ï¼šå‡ åƒä¸‡åˆ°ä¸Šäº¿ç¾å…ƒ

GPT-3 (175B)ï¼š
  ä¼°è®¡æˆæœ¬ï¼š1200 ä¸‡ç¾å…ƒ
  
GPT-4ï¼š
  ä¼°è®¡æˆæœ¬ï¼šä¸Šäº¿ç¾å…ƒï¼ˆæœªå…¬å¼€ï¼‰
```

**ğŸ”¥ 2024 å¹´æˆæœ¬çªç ´**ï¼š

```
DeepSeek-V3 æ¡ˆä¾‹ï¼š
  â”œâ”€ å‚æ•°ï¼š671Bï¼ˆæ¯” GPT-3 å¤§ï¼‰
  â”œâ”€ æ€»æˆæœ¬ï¼šä»… 557.6 ä¸‡ç¾å…ƒ ğŸ‰
  â”œâ”€ æ€§èƒ½ï¼šå¯¹æ ‡ GPT-4o
  â””â”€ å…³é”®æŠ€æœ¯ï¼š
      â”œâ”€ MoE æ¶æ„ï¼ˆåªæ¿€æ´»éƒ¨åˆ†å‚æ•°ï¼‰
      â”œâ”€ FP8 æ··åˆç²¾åº¦ï¼ˆæ˜¾å­˜å‡åŠï¼‰
      â””â”€ ç²¾é€‰é«˜è´¨é‡æ•°æ®ï¼ˆé‡å°‘è´¨é«˜ï¼‰

æˆæœ¬é™ä½ï¼šçº¦ 90%ï¼
```

**å¯è§†åŒ–ï¼šæˆæœ¬å¯¹æ¯”**

```
ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆ2023ï¼‰ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1750 äº¿å‚æ•°å…¨æ¿€æ´»              â”‚
  â”‚ FP16/BF16 ç²¾åº¦                 â”‚
  â”‚ æµ·é‡æ•°æ®ï¼ˆè¿½æ±‚è§„æ¨¡ï¼‰            â”‚
  â”‚ æˆæœ¬ï¼šå‡ åƒä¸‡ç¾å…ƒ ğŸ’°ğŸ’°ğŸ’°ğŸ’°ğŸ’°    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2024 æ–¹æ¡ˆï¼ˆDeepSeek-V3ï¼‰ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ MoE æ¶æ„ï¼ˆåªæ¿€æ´» 10-20%ï¼‰      â”‚
  â”‚ FP8 ç²¾åº¦ï¼ˆæ˜¾å­˜å‡åŠï¼‰            â”‚
  â”‚ ç²¾é€‰é«˜è´¨é‡æ•°æ®                  â”‚
  â”‚ æˆæœ¬ï¼š557 ä¸‡ç¾å…ƒ âœ…             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®­ç»ƒåçš„èƒ½åŠ›

```
âœ… ä¼šä»€ä¹ˆï¼š
  - ç»­å†™æ–‡æœ¬ï¼ˆ"ä»å‰æœ‰åº§å±±" â†’ "å±±ä¸Šæœ‰åº§åº™"ï¼‰
  - ç†è§£è¯­æ³•ï¼ˆçŸ¥é“ä¸»è°“å®¾ç»“æ„ï¼‰
  - æŒæ¡çŸ¥è¯†ï¼ˆå·´é»æ˜¯æ³•å›½é¦–éƒ½ï¼‰
  - ç®€å•æ¨ç†ï¼ˆå› æœå…³ç³»ï¼‰

âŒ ä¸ä¼šä»€ä¹ˆï¼š
  - å¬æ‡‚æŒ‡ä»¤ï¼ˆ"å†™ä¸€ç¯‡ä½œæ–‡" â†’ ç»§ç»­ç»­å†™è€Œä¸æ˜¯æ‰§è¡Œï¼‰
  - å¯¹è¯ï¼ˆåªä¼šç»­å†™ï¼Œä¸ä¼šå›ç­”é—®é¢˜ï¼‰
  - ç¬¦åˆäººç±»åå¥½ï¼ˆä¸çŸ¥é“ä»€ä¹ˆå›ç­”æ›´å¥½ï¼‰
  - å¤æ‚æ¨ç†ï¼ˆå¤šæ­¥æ¨ç†å®¹æ˜“å‡ºé”™ï¼‰

â†’ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åç»­çš„ SFTã€DPOã€Reasoning
```

**ä¸ LLM çš„å…³ç³»**ï¼š
- âœ… PreTrain æ˜¯ LLM çš„åŸºç¡€ï¼Œå è®­ç»ƒæˆæœ¬çš„ 90%+
- âœ… æ‰€æœ‰åç»­è®­ç»ƒéƒ½å»ºç«‹åœ¨ PreTrain çš„åŸºç¡€ä¸Š
- âœ… PreTrain è´¨é‡å†³å®šæ¨¡å‹çš„ä¸Šé™

---

## ğŸ”„ ä¸­æœŸè®­ç»ƒï¼ˆMid-Trainingï¼‰

### è®­ç»ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿâ­

**æœ¬è´¨**ï¼šåœ¨é€šç”¨èƒ½åŠ›çš„åŸºç¡€ä¸Šï¼Œé€‚åº”ç‰¹å®šé¢†åŸŸæˆ–æ‰©å±•èƒ½åŠ›

```
PreTrain åï¼š
  æ¨¡å‹ = é€šç”¨è¯­è¨€èƒ½åŠ› âœ…
  ä½†ï¼š
    - å¯¹å‚ç›´é¢†åŸŸä¸å¤Ÿä¸“ä¸š âš ï¸
    - ä¸Šä¸‹æ–‡é•¿åº¦æœ‰é™ï¼ˆå¦‚ 4Kï¼‰âš ï¸
    - ç›´æ¥ SFT å¯èƒ½å¯¼è‡´ç¾éš¾æ€§é—å¿˜ âŒ

Mid-Training åï¼š
  æ¨¡å‹ = é€šç”¨èƒ½åŠ› + é¢†åŸŸä¸“ä¸šèƒ½åŠ› âœ…
  æ•ˆæœï¼š
    - åŒ»ç–—ã€æ³•å¾‹ç­‰é¢†åŸŸè¡¨ç°æ›´å¥½ âœ…
    - ä¸Šä¸‹æ–‡é•¿åº¦æ‰©å±•ï¼ˆ32K â†’ 128K â†’ 1Mï¼‰âœ…
    - è¿‡æ¸¡æ›´å¹³æ»‘ï¼Œé—å¿˜é£é™©é™ä½ âœ…
```

**ä¸ºä»€ä¹ˆéœ€è¦ Mid-Trainingï¼Ÿ**

```
é—®é¢˜ï¼šç›´æ¥ä» PreTrain è·³åˆ° SFT

PreTrain æ¨¡å‹ï¼š
  "è‚ç¡¬åŒ–çš„æ²»ç–—æ–¹æ³•æ˜¯___"
  â†’ å¯èƒ½å›ç­”ï¼š"..."ï¼ˆä¸å¤Ÿä¸“ä¸šï¼‰

åŠ å…¥ Mid-Trainingï¼ˆåŒ»ç–—é¢†åŸŸæ•°æ®ï¼‰ï¼š
  "è‚ç¡¬åŒ–çš„æ²»ç–—æ–¹æ³•åŒ…æ‹¬___"
  â†’ å›ç­”ï¼š"è¯ç‰©æ²»ç–—ã€æ‰‹æœ¯æ²»ç–—ã€è‚ç§»æ¤..."ï¼ˆä¸“ä¸šï¼ï¼‰

åŸå› ï¼š
  Mid-Training ç”¨åŒ»ç–—é¢†åŸŸçš„æµ·é‡æ–‡çŒ®
  â†’ æ¨¡å‹å­¦åˆ°äº†åŒ»ç–—ä¸“ä¸šçŸ¥è¯†
  â†’ ä½†è¿˜æ²¡å¼€å§‹æŒ‡ä»¤å¾®è°ƒ
  â†’ ä¿æŒäº† PreTrain çš„é€šç”¨èƒ½åŠ›
```

### è®­ç»ƒç›®æ ‡ï¼šé¢†åŸŸé€‚åº” + ä¸Šä¸‹æ–‡æ‰©å±•

**ç›®æ ‡ 1ï¼šé¢†åŸŸé€‚åº”**

```python
# è¿˜æ˜¯ Next Token Prediction
P(token_t | context)

ä½†æ•°æ®æ¥æºä¸åŒï¼š
  - PreTrainï¼šç½‘é¡µã€ä¹¦ç±ã€ä»£ç ï¼ˆé€šç”¨ï¼‰
  - Mid-Trainingï¼šåŒ»ç–—è®ºæ–‡ã€æ³•å¾‹åˆ¤ä¾‹ã€é‡‘èæŠ¥å‘Šï¼ˆä¸“ä¸šï¼‰

ä¾‹å­ï¼š
  è¾“å…¥ï¼š"æ‚£è€…å‡ºç°é»„ç–¸ã€è…¹æ°´ï¼Œè¯Šæ–­ä¸º___"
  é¢„æµ‹ï¼š"è‚ç¡¬åŒ–"ï¼ˆè€Œä¸æ˜¯ä¸€èˆ¬æ€§å›ç­”ï¼‰
```

**ç›®æ ‡ 2ï¼šä¸Šä¸‹æ–‡æ‰©å±•**

```
é—®é¢˜ï¼šPreTrain é€šå¸¸åªæ”¯æŒ 4K tokens
     ä½†å®é™…åº”ç”¨éœ€è¦æ›´é•¿çš„ä¸Šä¸‹æ–‡

è§£å†³ï¼šé€æ­¥æ‰©å±•åºåˆ—é•¿åº¦
  4K â†’ 8K â†’ 16K â†’ 32K â†’ 128K

æŠ€æœ¯ï¼šä½ç½®ç¼–ç æ’å€¼ï¼ˆRoPEï¼‰
  åŸå§‹ï¼špos_0, pos_1, ..., pos_4095
  æ‰©å±•ï¼šæ’å€¼åˆ° pos_0, pos_1, ..., pos_131071
  
  â†’ æ¨¡å‹å­¦ä¼šå¤„ç†æ›´é•¿çš„æ–‡æœ¬
```

### æ•°æ®ç‰¹ç‚¹ï¼šç²¾é€‰ + é¢†åŸŸåŒ–

```
è§„æ¨¡ï¼šç™¾ä¸‡åˆ°æ•°åäº¿ tokens
  - æ¯” PreTrain å°å¾—å¤šï¼ˆåƒå€ï¼‰
  - æ¯” SFT å¤§å¾—å¤šï¼ˆåƒå€ï¼‰

æ•°æ®æ¥æºï¼š
  åŒ»ç–—ï¼šPubMed è®ºæ–‡ã€åŒ»å­¦æ•™æ
  æ³•å¾‹ï¼šåˆ¤ä¾‹ã€æ³•æ¡ã€æ³•å¾‹æ–‡ä¹¦
  é‡‘èï¼šè´¢æŠ¥ã€ç ”æŠ¥ã€é‡‘èæ–°é—»
  ä»£ç ï¼šGitHub é«˜è´¨é‡é¡¹ç›®

è´¨é‡è¦æ±‚ï¼š
  âœ… é«˜äº PreTrainï¼ˆéœ€è¦ç²¾é€‰ï¼‰
  âŒ ä½†ä¸éœ€è¦æ ‡æ³¨ï¼ˆè¿˜æ˜¯è‡ªç›‘ç£ï¼‰
```

### è®­ç»ƒç­–ç•¥ï¼šé€€ç«å¼å¤šé˜¶æ®µ

```
é˜¶æ®µ 1ï¼šæ•°æ®ç²¾ç‚¼
  ä»é¢„è®­ç»ƒæ•°æ®ä¸­ç­›é€‰é«˜è´¨é‡éƒ¨åˆ†
  æ·»åŠ é¢†åŸŸç‰¹å®šæ•°æ®

é˜¶æ®µ 2ï¼šå­¦ä¹ ç‡é€€ç«
  for epoch in [1, 2, 3]:  # å¤šæ¬¡é€€ç«
      lr = base_lr * (0.1 ** epoch)  # å­¦ä¹ ç‡é€æ­¥é™ä½
      è®­ç»ƒ ...
  
  ç±»ä¼¼ç‚¼é’¢ï¼šåå¤åŠ çƒ­ã€å†·å´
  â†’ æ¨¡å‹æ›´ç¨³å®š

é˜¶æ®µ 3ï¼šä¸Šä¸‹æ–‡æ‰©å±•
  é€æ­¥å¢åŠ åºåˆ—é•¿åº¦
  4K â†’ 8K â†’ 16K â†’ 32K â†’ 128K
  æ¯æ¬¡å¢åŠ éƒ½è®­ç»ƒä¸€æ®µæ—¶é—´
```

### è®­ç»ƒæˆæœ¬ï¼šé€‚ä¸­

```
æ•°æ®æˆæœ¬ï¼šä¸­ç­‰ï¼ˆéœ€è¦ç²¾é€‰ï¼Œä½†ä¸éœ€è¦æ ‡æ³¨ï¼‰
è®¡ç®—æˆæœ¬ï¼šå‡ ä¸‡åˆ°åå‡ ä¸‡ç¾å…ƒ
è®­ç»ƒæ—¶é•¿ï¼šå‡ å¤©åˆ°ä¸€å‘¨

å¯¹æ¯”ï¼š
  - æ¯” PreTrain ä¾¿å®œå¾ˆå¤šï¼ˆåƒå€ï¼‰
  - æ¯” SFT è´µä¸€äº›ï¼ˆ10 å€ï¼‰
```

### è®­ç»ƒåçš„èƒ½åŠ›

```
âœ… æ–°å¢èƒ½åŠ›ï¼š
  - é¢†åŸŸä¸“ä¸šçŸ¥è¯†ï¼ˆåŒ»ç–—ã€æ³•å¾‹ã€é‡‘èï¼‰
  - æ›´é•¿çš„ä¸Šä¸‹æ–‡ç†è§£ï¼ˆ128K+ï¼‰
  - æ›´å¥½çš„çŸ¥è¯†è®°å¿†

âœ… ä¿ç•™èƒ½åŠ›ï¼š
  - PreTrain çš„é€šç”¨èƒ½åŠ›
  - è¯­æ³•ã€è¯­ä¹‰ç†è§£
  - åŸºç¡€æ¨ç†

âŒ è¿˜æ˜¯ä¸ä¼šï¼š
  - å¬æ‡‚æŒ‡ä»¤ï¼ˆéœ€è¦ SFTï¼‰
  - å¯¹è¯ï¼ˆéœ€è¦ SFTï¼‰
  - ç¬¦åˆäººç±»åå¥½ï¼ˆéœ€è¦ DPOï¼‰
```

**ä¸ LLM çš„å…³ç³»**ï¼š
- âœ… Mid-Training æ˜¯ 2024 å¹´çš„æ–°å‘ç°
- âœ… å‚ç›´é¢†åŸŸåº”ç”¨çš„å¿…å¤‡æ­¥éª¤
- âœ… å¡«è¡¥äº† PreTrain å’Œ SFT ä¹‹é—´çš„ç©ºç™½

---

## ğŸ“ æŒ‡ä»¤å¾®è°ƒï¼ˆSFTï¼‰

### è®­ç»ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿâ­

**æœ¬è´¨**ï¼šè®©æ¨¡å‹ä»"ç»­å†™æœºå™¨"å˜æˆ"å¯¹è¯åŠ©æ‰‹"

```
SFT å‰ï¼ˆåªæœ‰ PreTrainï¼‰ï¼š
  ç”¨æˆ·ï¼š"å¸®æˆ‘å†™ä¸€å°é‚®ä»¶"
  æ¨¡å‹ï¼š"ï¼Œé‚®ä»¶çš„ä¸»é¢˜æ˜¯...å·¥ä½œæ±‡æŠ¥..."
  â†’ åªä¼šç»­å†™ï¼Œä¸ä¼šæ‰§è¡Œ âŒ

SFT åï¼š
  ç”¨æˆ·ï¼š"å¸®æˆ‘å†™ä¸€å°é‚®ä»¶"
  æ¨¡å‹ï¼š"å¥½çš„ï¼è¯·é—®é‚®ä»¶çš„ä¸»é¢˜æ˜¯ä»€ä¹ˆï¼Ÿæ”¶ä»¶äººæ˜¯è°ï¼Ÿ"
  â†’ ç†è§£æŒ‡ä»¤ï¼Œæ‰§è¡Œä»»åŠ¡ âœ…
```

**å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ**

```
1. æŒ‡ä»¤ç†è§£
   "ç¿»è¯‘" â†’ çŸ¥é“è¦åšç¿»è¯‘ä»»åŠ¡
   "æ€»ç»“" â†’ çŸ¥é“è¦åšæ‘˜è¦ä»»åŠ¡
   "è§£é‡Š" â†’ çŸ¥é“è¦åšè§£é‡Šä»»åŠ¡

2. ä»»åŠ¡æ‰§è¡Œ
   ç»™å®šæŒ‡ä»¤ â†’ ç”Ÿæˆç¬¦åˆè¦æ±‚çš„è¾“å‡º
   ä¸æ˜¯ç»­å†™ï¼Œè€Œæ˜¯æ‰§è¡Œ

3. æ ¼å¼éµå¾ª
   "ç”¨åˆ—è¡¨æ ¼å¼å›ç­”" â†’ çœŸçš„ç”¨åˆ—è¡¨
   "ç”¨ä»£ç å®ç°" â†’ çœŸçš„å†™ä»£ç 
   "100 å­—ä»¥å†…" â†’ æ§åˆ¶é•¿åº¦

4. ä»»åŠ¡æ³›åŒ–
   è§è¿‡"ç¿»è¯‘è‹±æ–‡åˆ°ä¸­æ–‡"
   â†’ èƒ½æ¨å¹¿åˆ°"ç¿»è¯‘æ—¥æ–‡åˆ°è‹±æ–‡"
```

### è®­ç»ƒç›®æ ‡ï¼šInstruction Following

```python
# æ ¸å¿ƒå…¬å¼
P(output | instruction, input)

# å…·ä½“ä¾‹å­
instruction: "å°†ä¸‹é¢çš„å¥å­ç¿»è¯‘æˆè‹±æ–‡"
input: "çŒ«åœ¨ç¡è§‰"
output: "The cat is sleeping"

è®­ç»ƒæ­¥éª¤ï¼š
  1. æ¨¡å‹çœ‹åˆ° instruction + input
  2. ç”Ÿæˆ output çš„æ¦‚ç‡åˆ†å¸ƒ
  3. è®¡ç®—æŸå¤±ï¼šåªå¯¹ output éƒ¨åˆ†è®¡ç®—
     ï¼ˆinstruction å’Œ input ä¸ç®—æŸå¤±ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å·²çŸ¥çš„ï¼‰
  4. åå‘ä¼ æ’­ï¼Œè°ƒæ•´å‚æ•°
  5. é‡å¤å‡ ä¸‡æ¬¡
```

**å…³é”®ç‚¹**ï¼š

```
SFT çš„æŸå¤±è®¡ç®—ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [instruction] [input] [output]       â”‚
â”‚   ä¸ç®—æŸå¤±      ä¸ç®—æŸå¤±   ç®—æŸå¤± âœ…  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¸ºä»€ä¹ˆï¼Ÿ
  instruction å’Œ input æ˜¯ç»™å®šçš„ï¼ˆå·²çŸ¥ï¼‰
  åªéœ€è¦å­¦ä¹ å¦‚ä½•ç”Ÿæˆæ­£ç¡®çš„ output
```

### æ•°æ®ç‰¹ç‚¹ï¼šå°‘è€Œç²¾

```
è§„æ¨¡ï¼šå‡ ä¸‡åˆ°å‡ åä¸‡æ¡
  - æ¯” PreTrain å°‘å‡ ä¸‡å€
  - æ¯” Mid-Training å°‘å‡ åƒå€

æ•°æ®æ ¼å¼ï¼š
  {
    "instruction": "ä»»åŠ¡æè¿°",
    "input": "è¾“å…¥å†…å®¹ï¼ˆå¯é€‰ï¼‰",
    "output": "æœŸæœ›è¾“å‡º"
  }

è´¨é‡è¦æ±‚ï¼šæé«˜ï¼
  âœ… è´¨é‡ > æ•°é‡ï¼ˆè¿™æ˜¯ SFT çš„æ ¸å¿ƒï¼‰
  âœ… 1 ä¸‡æ¡é«˜è´¨é‡ > 10 ä¸‡æ¡ä½è´¨é‡
  âœ… å¤šæ ·æ€§å¾ˆé‡è¦ï¼ˆè¦†ç›–å„ç§ä»»åŠ¡ï¼‰
```

**æ•°æ®ç¤ºä¾‹**ï¼š

```json
// ç¤ºä¾‹ 1ï¼šç¿»è¯‘ä»»åŠ¡
{
  "instruction": "å°†ä¸‹é¢çš„å¥å­ç¿»è¯‘æˆè‹±æ–‡",
  "input": "ä»Šå¤©å¤©æ°”çœŸå¥½",
  "output": "The weather is really nice today."
}

// ç¤ºä¾‹ 2ï¼šä»£ç ä»»åŠ¡
{
  "instruction": "å†™ä¸€ä¸ª Python å‡½æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—",
  "input": "n=10",
  "output": "def fibonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)"
}

// ç¤ºä¾‹ 3ï¼šå¼€æ”¾é—®ç­”
{
  "instruction": "è§£é‡Šä»€ä¹ˆæ˜¯é€’å½’",
  "input": "",
  "output": "é€’å½’æ˜¯ä¸€ç§å‡½æ•°è°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€æœ¯..."
}
```

**æ•°æ®æ¥æºæ¼”åŒ–**ï¼š

```
2021: äººå·¥æ ‡æ³¨
  æˆæœ¬ï¼šé«˜ï¼ˆ$5-10/æ¡ï¼‰
  è´¨é‡ï¼šå¥½
  è§„æ¨¡ï¼šå°ï¼ˆå‡ ä¸‡æ¡ï¼‰

2022: Self-Instruct
  æ–¹æ³•ï¼šè®© GPT-3 ç”Ÿæˆï¼Œäººå·¥ç­›é€‰
  æˆæœ¬ï¼šä¸­ç­‰
  è´¨é‡ï¼šå¥½
  è§„æ¨¡ï¼šä¸­ï¼ˆåä¸‡æ¡ï¼‰

2023: Alpaca
  æ–¹æ³•ï¼šç”¨ GPT-3.5 ç”Ÿæˆ 52K æ•°æ®
  æˆæœ¬ï¼šä½ï¼ˆ<$500ï¼‰
  è´¨é‡ï¼šä¸­ç­‰
  è§„æ¨¡ï¼šä¸­

2024-2025: ShareGPT + åˆæˆæ•°æ®
  æ–¹æ³•ï¼šçœŸå®ç”¨æˆ·å¯¹è¯ + é«˜è´¨é‡åˆæˆ
  æˆæœ¬ï¼šä½
  è´¨é‡ï¼šé«˜
  è§„æ¨¡ï¼šå¤§ï¼ˆç™¾ä¸‡æ¡ï¼‰
```

### è®­ç»ƒæˆæœ¬ï¼šä¾¿å®œ

```
æ•°æ®æˆæœ¬ï¼šå‡ åƒåˆ°å‡ ä¸‡ç¾å…ƒ
è®¡ç®—æˆæœ¬ï¼šå‡ åƒåˆ°å‡ ä¸‡ç¾å…ƒ
è®­ç»ƒæ—¶é•¿ï¼šå‡ å°æ—¶åˆ°å‡ å¤©

å¯¹æ¯”ï¼š
  - æ¯” PreTrain ä¾¿å®œå‡ åƒå€
  - æ¯” Mid-Training ä¾¿å®œå‡ åå€
  
å¯ä»¥ç”¨ LoRA ç­‰å‚æ•°é«˜æ•ˆæ–¹æ³•ï¼š
  åªè®­ç»ƒ 0.1% çš„å‚æ•°
  æ˜¾å­˜éœ€æ±‚ï¼š20GBï¼ˆè€Œä¸æ˜¯ 700GBï¼‰
  æ•ˆæœï¼šå‡ ä¹ä¸€æ · âœ…
```

### è®­ç»ƒåçš„èƒ½åŠ›

```
âœ… æ–°å¢èƒ½åŠ›ï¼š
  - ç†è§£äººç±»æŒ‡ä»¤
  - æ‰§è¡Œå„ç§ä»»åŠ¡ï¼ˆç¿»è¯‘ã€æ‘˜è¦ã€é—®ç­”ã€ä»£ç ï¼‰
  - éµå¾ªæ ¼å¼è¦æ±‚
  - ä»»åŠ¡æ³›åŒ–ï¼ˆä¸¾ä¸€åä¸‰ï¼‰

âœ… ä¿ç•™èƒ½åŠ›ï¼š
  - PreTrain çš„è¯­è¨€èƒ½åŠ›
  - Mid-Training çš„é¢†åŸŸèƒ½åŠ›ï¼ˆå¦‚æœæœ‰ï¼‰

âŒ è¿˜æ˜¯ä¸ä¼šï¼š
  - ç”Ÿæˆ"å¥½"çš„å›ç­”ï¼ˆéœ€è¦ DPOï¼‰
  - ç¬¦åˆäººç±»ä»·å€¼è§‚ï¼ˆéœ€è¦ DPOï¼‰
  - å¤æ‚æ¨ç†ï¼ˆéœ€è¦ Reasoningï¼‰
```

**ä¸ LLM çš„å…³ç³»**ï¼š
- âœ… SFT æ˜¯å¿…é¡»çš„ï¼Œè®©æ¨¡å‹å¬è¯
- âœ… SFT çš„æ•°æ®è´¨é‡ç›´æ¥å†³å®šæ¨¡å‹çš„å¯ç”¨æ€§
- âœ… SFT æ¨¡å‹æ˜¯åç»­ DPO çš„èµ·ç‚¹ï¼ˆÏ€_refï¼‰

---

## ğŸ“Š ä¸‰ä¸ªé˜¶æ®µçš„å¯¹æ¯”

### è®­ç»ƒç›®æ ‡å¯¹æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è®­ç»ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  PreTrain:    è¯­è¨€èƒ½åŠ›ï¼ˆè¯­æ³•ã€çŸ¥è¯†ã€ä¸–ç•Œæ¨¡å‹ï¼‰        â”‚
â”‚               "å­¦ä¼šè¯´è¯"                              â”‚
â”‚                                                      â”‚
â”‚  Mid-Training: é¢†åŸŸä¸“ä¸šèƒ½åŠ› + ä¸Šä¸‹æ–‡æ‰©å±•              â”‚
â”‚                "å·©å›ºåŸºç¡€ï¼Œé€‚åº”é¢†åŸŸ"                    â”‚
â”‚                                                      â”‚
â”‚  SFT:         æŒ‡ä»¤ç†è§£èƒ½åŠ›                            â”‚
â”‚               "å­¦ä¼šå¬è¯"                              â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®è§„æ¨¡å¯¹æ¯”

```
PreTrain:     ä¸‡äº¿ tokens      ğŸ’°ğŸ’°ğŸ’°ğŸ’°ğŸ’° æœ€è´µ
   â†“ 1000 å€
Mid-Training: æ•°åäº¿ tokens    ğŸ’°ğŸ’° ä¸­ç­‰
   â†“ 1000 å€
SFT:          å‡ ä¸‡æ¡           ğŸ’° ä¾¿å®œ
```

### èƒ½åŠ›æ¼”è¿›å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                èƒ½åŠ›æ¼”è¿›                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

éšæœºåˆå§‹åŒ–
  â†“ PreTrainï¼ˆå‡ ä¸ªæœˆï¼‰
è¯­è¨€èƒ½åŠ› âœ…
  - ç»­å†™æ–‡æœ¬
  - ç†è§£è¯­æ³•
  - æŒæ¡çŸ¥è¯†
  - ç®€å•æ¨ç†
  â†“ Mid-Trainingï¼ˆå‡ å¤©ï¼‰
+ é¢†åŸŸä¸“ä¸šèƒ½åŠ› âœ…
  - åŒ»ç–—ã€æ³•å¾‹ã€é‡‘èä¸“ä¸šçŸ¥è¯†
  - æ›´é•¿çš„ä¸Šä¸‹æ–‡ï¼ˆ128K+ï¼‰
  â†“ SFTï¼ˆå‡ å°æ—¶ï¼‰
+ æŒ‡ä»¤ç†è§£èƒ½åŠ› âœ…
  - å¬æ‡‚äººç±»æŒ‡ä»¤
  - æ‰§è¡Œå„ç§ä»»åŠ¡
  - éµå¾ªæ ¼å¼è¦æ±‚
```

### å¯¹æ¯”è¡¨

| ç»´åº¦ | PreTrain | Mid-Training | SFT |
|------|----------|-------------|-----|
| **è®­ç»ƒçš„æ˜¯** | è¯­è¨€èƒ½åŠ› | é¢†åŸŸèƒ½åŠ› | æŒ‡ä»¤ç†è§£ |
| **æ•°æ®è§„æ¨¡** | ä¸‡äº¿ tokens | æ•°åäº¿ tokens | å‡ ä¸‡æ¡ |
| **æ•°æ®è´¨é‡** | ä¸­ï¼ˆéœ€æ¸…æ´—ï¼‰ | é«˜ï¼ˆç²¾é€‰ï¼‰ | æé«˜ |
| **æ ‡æ³¨æ–¹å¼** | æ— éœ€æ ‡æ³¨ | æ— éœ€æ ‡æ³¨ | äººå·¥æ ‡æ³¨ |
| **è®­ç»ƒæ—¶é•¿** | å‡ ä¸ªæœˆ | å‡ å¤© | å‡ å°æ—¶åˆ°å‡ å¤© |
| **è®¡ç®—æˆæœ¬** | æœ€è´µï¼ˆ557 ä¸‡+ï¼‰ | ä¸­ç­‰ï¼ˆå‡ ä¸‡ï¼‰ | ä¾¿å®œï¼ˆå‡ åƒï¼‰ |
| **å¿…è¦æ€§** | âœ… å¿…é¡» | â­ æ¨è | âœ… å¿…é¡» |
| **èƒ½åŠ›** | ç»­å†™ | ä¸“ä¸š | å¯¹è¯ |

---

## ğŸ”— ä¸ LLM çš„å…³ç³»

### 1. è®­ç»ƒæµç¨‹

```
LLM çš„å®Œæ•´è®­ç»ƒæµç¨‹ï¼š

ç¬¬ 1 æ­¥ï¼šPreTrainï¼ˆå¿…é¡»ï¼‰
  è¾“å…¥ï¼šTB çº§åŸå§‹æ–‡æœ¬
  è¾“å‡ºï¼šä¼šè¯´è¯çš„æ¨¡å‹
  ç›®æ ‡ï¼šP(next_token | context)
  
ç¬¬ 2 æ­¥ï¼šMid-Trainingï¼ˆå¯é€‰ä½†æ¨èï¼‰
  è¾“å…¥ï¼šç²¾é€‰çš„é¢†åŸŸæ•°æ®
  è¾“å‡ºï¼šæœ‰ä¸“ä¸šèƒ½åŠ›çš„æ¨¡å‹
  ç›®æ ‡ï¼šP(next_token | context)ï¼ˆä½†æ•°æ®æ›´ä¸“ä¸šï¼‰
  
ç¬¬ 3 æ­¥ï¼šSFTï¼ˆå¿…é¡»ï¼‰
  è¾“å…¥ï¼š(instruction, input, output) ä¸‰å…ƒç»„
  è¾“å‡ºï¼šèƒ½å¬è¯çš„æ¨¡å‹
  ç›®æ ‡ï¼šP(output | instruction, input)
```

### 2. å‚æ•°æ›´æ–°

```
æ‰€æœ‰é˜¶æ®µéƒ½åœ¨è°ƒæ•´åŒä¸€æ‰¹å‚æ•°ï¼š

åˆå§‹åŒ–ï¼š
  W = random()  â† éšæœºåˆå§‹åŒ–

PreTrainï¼š
  W = W - lr Ã— âˆ‡L_pretrain
  â†’ å­¦åˆ°è¯­è¨€èƒ½åŠ›

Mid-Trainingï¼š
  W = W - lr Ã— âˆ‡L_mid
  â†’ å­¦åˆ°é¢†åŸŸèƒ½åŠ›

SFTï¼š
  W = W - lr Ã— âˆ‡L_sft
  â†’ å­¦åˆ°æŒ‡ä»¤ç†è§£

â†’ åŒä¸€æ‰¹å‚æ•°ï¼Œä¸åŒè®­ç»ƒç›®æ ‡ï¼Œä¸åŒèƒ½åŠ›
```

### 3. èƒ½åŠ›çš„ç´¯ç§¯

```
å…³é”®æ´å¯Ÿï¼šèƒ½åŠ›æ˜¯ç´¯ç§¯çš„ï¼Œä¸æ˜¯æ›¿æ¢çš„

PreTrain â†’ Mid-Trainingï¼š
  âœ… ä¿ç•™é€šç”¨è¯­è¨€èƒ½åŠ›
  âœ… æ–°å¢é¢†åŸŸä¸“ä¸šèƒ½åŠ›
  
Mid-Training â†’ SFTï¼š
  âœ… ä¿ç•™è¯­è¨€èƒ½åŠ› + é¢†åŸŸèƒ½åŠ›
  âœ… æ–°å¢æŒ‡ä»¤ç†è§£èƒ½åŠ›

å¦‚æœè·³è¿‡ Mid-Trainingï¼š
  PreTrain â†’ SFT
  âš ï¸ ä¹Ÿå¯ä»¥ï¼Œä½†é¢†åŸŸé€‚åº”æ€§å·®
  âš ï¸ å¯èƒ½ç¾éš¾æ€§é—å¿˜ï¼ˆé—å¿˜ PreTrain çš„çŸ¥è¯†ï¼‰
```

### 4. ä¸ºä»€ä¹ˆè¦åˆ†é˜¶æ®µï¼Ÿ

```
é—®é¢˜ï¼šèƒ½ä¸èƒ½ä¸€æ­¥åˆ°ä½ï¼Ÿ
     èƒ½ä¸èƒ½ç›´æ¥ç”¨ (instruction, output) æ•°æ®ä»é›¶è®­ç»ƒï¼Ÿ

ç­”æ¡ˆï¼šä¸èƒ½ âŒ

åŸå› ï¼š
  1. æ•°æ®è§„æ¨¡å·®è·å¤ªå¤§
     PreTrain: ä¸‡äº¿ tokens
     SFT: å‡ ä¸‡æ¡
     â†’ ä»é›¶è®­ç»ƒ SFT æ•°æ®ï¼Œæ¨¡å‹å­¦ä¸åˆ°è¯­è¨€è§„å¾‹
  
  2. å­¦ä¹ éš¾åº¦ä¸åŒ
     PreTrain: ç®€å•ï¼ˆé¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼‰
     SFT: å¤æ‚ï¼ˆç†è§£æŒ‡ä»¤ï¼Œæ‰§è¡Œä»»åŠ¡ï¼‰
     â†’ å¿…é¡»å…ˆå­¦ç®€å•çš„ï¼Œå†å­¦å¤æ‚çš„
  
  3. æˆæœ¬è€ƒè™‘
     PreTrain: ä¸€æ¬¡è®­ç»ƒï¼Œæ‰€æœ‰åœºæ™¯é€šç”¨
     SFT: ä¸åŒåœºæ™¯å¯ä»¥ç”¨ä¸åŒçš„ SFT æ•°æ®
     â†’ åˆ†é˜¶æ®µæ›´çµæ´»ã€æ›´ç»æµ
```

---

## ğŸ¯ æ ¸å¿ƒè¦ç‚¹æ€»ç»“

### 1. PreTrain

```
âœ… è®­ç»ƒçš„æ˜¯ï¼šè¯­è¨€èƒ½åŠ›ï¼ˆä»æ— åˆ°æœ‰ï¼‰
âœ… æ•°æ®ï¼šä¸‡äº¿ tokensï¼ŒTB çº§
âœ… æˆæœ¬ï¼šæœ€è´µï¼ˆä½† 2024 é™åˆ° 557 ä¸‡ï¼‰
âœ… æ•ˆæœï¼šä¼šè¯´è¯ï¼Œä½†ä¸å¬è¯
âœ… å¿…è¦æ€§ï¼šå¿…é¡»ï¼ˆæ‰€æœ‰ LLM çš„åŸºç¡€ï¼‰
```

### 2. Mid-Training

```
âœ… è®­ç»ƒçš„æ˜¯ï¼šé¢†åŸŸèƒ½åŠ›ï¼ˆä¸“ä¸šåŒ–ï¼‰
âœ… æ•°æ®ï¼šæ•°åäº¿ tokensï¼Œç²¾é€‰é¢†åŸŸæ•°æ®
âœ… æˆæœ¬ï¼šä¸­ç­‰ï¼ˆå‡ ä¸‡åˆ°åå‡ ä¸‡ï¼‰
âœ… æ•ˆæœï¼šä¸“ä¸šï¼Œä¸Šä¸‹æ–‡é•¿
âœ… å¿…è¦æ€§ï¼šæ¨èï¼ˆå‚ç›´é¢†åŸŸå¿…å¤‡ï¼‰
âœ… æ—¶é—´ï¼š2024 å¹´æ–°æ ‡é…
```

### 3. SFT

```
âœ… è®­ç»ƒçš„æ˜¯ï¼šæŒ‡ä»¤ç†è§£ï¼ˆå¬è¯ï¼‰
âœ… æ•°æ®ï¼šå‡ ä¸‡æ¡ï¼Œè´¨é‡æé«˜
âœ… æˆæœ¬ï¼šä¾¿å®œï¼ˆå‡ åƒåˆ°å‡ ä¸‡ï¼‰
âœ… æ•ˆæœï¼šä»ç»­å†™æœºå™¨åˆ°å¯¹è¯åŠ©æ‰‹
âœ… å¿…è¦æ€§ï¼šå¿…é¡»ï¼ˆè®©æ¨¡å‹å¯ç”¨ï¼‰
```

### 4. ä¸‰ä¸ªé˜¶æ®µçš„å…³ç³»

```
PreTrain    â†’ å­¦ä¼šè¯´è¯ï¼ˆè¯­è¨€è§„å¾‹ï¼‰
   â†“
Mid-Training â†’ å·©å›ºåŸºç¡€ï¼ˆé¢†åŸŸé€‚åº”ï¼‰
   â†“
SFT         â†’ å­¦ä¼šå¬è¯ï¼ˆæŒ‡ä»¤ç†è§£ï¼‰
   â†“
DPO         â†’ å­¦ä¼šä»·å€¼è§‚ï¼ˆä¸‹ä¸€ç« ï¼‰
```

---

## ğŸ“š æ¨èé˜…è¯»

**æ ¸å¿ƒè®ºæ–‡**ï¼š
- [Language Models are Few-Shot Learners](https://arxiv.org/abs/2005.14165) (GPT-3, 2020)
- [Scaling Language Models: Methods, Analysis & Insights](https://arxiv.org/abs/2112.00861) (DeepMind, 2021)
- [Self-Instruct: Aligning LMs with Self-Generated Instructions](https://arxiv.org/abs/2212.10560) (2022)

**ç›¸å…³æ–‡æ¡£**ï¼š
- â¬‡ï¸ [L0: LLM æ¨¡å‹æœ¬è´¨](./L0-llm-model-essence.md) - ç†è§£æ¨¡å‹æ˜¯ä»€ä¹ˆ
- â¬†ï¸ [L+2: å¯¹é½ä¸æ¨ç†](./L+2-alignment-rlhf-dpo.md) - ä¸‹ä¸€æ­¥ï¼šè®©æ¨¡å‹ç¬¦åˆäººç±»åå¥½
- â¡ï¸ [L+3: å®æˆ˜å»ºè®®](./L+3-practical-guide.md) - å¦‚ä½•é€‰æ‹©è®­ç»ƒæ–¹æ¡ˆ

---

**è®°ä½**ï¼šPreTrainã€Mid-Trainingã€SFT è®­ç»ƒçš„æ˜¯**ä¸åŒçš„èƒ½åŠ›**ã€‚

ç†è§£"è®­ç»ƒçš„æ˜¯ä»€ä¹ˆ"æ¯”"æ€ä¹ˆè®­ç»ƒ"æ›´é‡è¦ã€‚âœ¨

---

*æœ€åæ›´æ–°ï¼š2026 å¹´ 1 æœˆ*
